"use strict";(self.webpackChunkjx3dps_online=self.webpackChunkjx3dps_online||[]).push([[5726],{40849:function(t,e,i){i.d(e,{AL:function(){return s},ak:function(){return r},nA:function(){return n}});var o={};function r(t,e){o[t]=e}function n(){return Object.keys(o)}function s(t){return o[t]}},84354:function(t,e,i){var o=i(29388),r=i(54818),n=i(24625),s=i(47540),a=i(51698),h=i(41172),l=i(55099),p=i(41648),u=i(70791),c=i(30090);function d(t,e){return(0,r.jn)(t)?!1!==t&&{}:(0,r.U2)(t,[e],t)}function g(t){return(0,r.U2)(t,"position",n.JR.BOTTOM)}var f=function(t){function e(e){var i=t.call(this,e)||this;return i.container=i.view.getLayer(n.JM.FORE).addGroup(),i}return(0,o.ZT)(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"legend"},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.render=function(){this.update()},e.prototype.layout=function(){var t=this;this.layoutBBox=this.view.viewBBox,(0,r.S6)(this.components,(function(e){var i=e.component,r=e.direction,n=(0,u.tb)(r),s=i.get("maxWidthRatio"),a=i.get("maxHeightRatio"),p=t.getCategoryLegendSizeCfg(n,s,a),c=i.get("maxWidth"),d=i.get("maxHeight");i.update({maxWidth:Math.min(p.maxWidth,c||0),maxHeight:Math.min(p.maxHeight,d||0)});var g=i.get("padding"),f=i.getLayoutBBox(),v=new h.bK(f.x,f.y,f.width,f.height).expand(g),y=(0,o.CR)((0,l.f)(t.view.viewBBox,v,r),2),m=y[0],C=y[1],w=(0,o.CR)((0,l.f)(t.layoutBBox,v,r),2),x=w[0],b=w[1],T=0,S=0;r.startsWith("top")||r.startsWith("bottom")?(T=m,S=b):(T=x,S=C),i.setLocation({x:T+g[3],y:S+g[0]}),t.layoutBBox=t.layoutBBox.cut(v,r)}))},e.prototype.update=function(){var t=this;this.option=this.view.getOptions().legends;var e={};if((0,r.U2)(this.option,"custom")){var i="global-custom",o=this.getComponentById(i);if(o){var s=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);(0,p.CE)(s,["container"]),o.component.update(s),e[i]=!0}else{var a=this.createCustomLegend(void 0,void 0,void 0,this.option);if(a){a.init();var h=n.JM.FORE,l=g(this.option);this.components.push({id:i,component:a,layer:h,direction:l,type:n.TN.LEGEND,extra:void 0}),e[i]=!0}}}else this.loopLegends((function(i,o,n){var s=t.getId(n.field),a=t.getComponentById(s);if(a){var h=void 0,l=d(t.option,n.field);!1!==l&&((0,r.U2)(l,"custom")?h=t.getCategoryCfg(i,o,n,l,!0):n.isLinear?h=t.getContinuousCfg(i,o,n,l):n.isCategory&&(h=t.getCategoryCfg(i,o,n,l))),h&&((0,p.CE)(h,["container"]),a.direction=g(l),a.component.update(h),e[s]=!0)}else{var u=t.createFieldLegend(i,o,n);u&&(u.component.init(),t.components.push(u),e[s]=!0)}}));var u=[];(0,r.S6)(this.getComponents(),(function(t){e[t.id]?u.push(t):t.component.destroy()})),this.components=u},e.prototype.clear=function(){t.prototype.clear.call(this),this.container.clear()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.container.remove(!0)},e.prototype.getGeometries=function(t){var e=this,i=t.geometries;return(0,r.S6)(t.views,(function(t){i=i.concat(e.getGeometries(t))})),i},e.prototype.loopLegends=function(t){if(this.view.getRootView()===this.view){var e=this.getGeometries(this.view),i={};(0,r.S6)(e,(function(e){var o=e.getGroupAttributes();(0,r.S6)(o,(function(o){var r=o.getScale(o.type);r&&"identity"!==r.type&&!i[r.field]&&(t(e,o,r),i[r.field]=!0)}))}))}},e.prototype.createFieldLegend=function(t,e,i){var o,s=d(this.option,i.field),a=n.JM.FORE,h=g(s);if(!1!==s&&((0,r.U2)(s,"custom")?o=this.createCustomLegend(t,e,i,s):i.isLinear?o=this.createContinuousLegend(t,e,i,s):i.isCategory&&(o=this.createCategoryLegend(t,e,i,s))),o)return o.set("field",i.field),{id:this.getId(i.field),component:o,layer:a,direction:h,type:n.TN.LEGEND,extra:{scale:i}}},e.prototype.createCustomLegend=function(t,e,i,o){var r=this.getCategoryCfg(t,e,i,o,!0);return new s.lS(r)},e.prototype.createContinuousLegend=function(t,e,i,o){var r=this.getContinuousCfg(t,e,i,(0,p.CE)(o,["value"]));return new s.sG(r)},e.prototype.createCategoryLegend=function(t,e,i,o){var r=this.getCategoryCfg(t,e,i,o);return new s.lS(r)},e.prototype.getContinuousCfg=function(t,e,i,o){var n=i.getTicks(),s=(0,r.sE)(n,(function(t){return 0===t.value})),h=(0,r.sE)(n,(function(t){return 1===t.value})),l=n.map((function(t){var o=t.value,r=t.tickValue,n=e.mapping(i.invert(o)).join("");return{value:r,attrValue:n,color:n,scaleValue:o}}));s||l.push({value:i.min,attrValue:e.mapping(i.invert(0)).join(""),color:e.mapping(i.invert(0)).join(""),scaleValue:0}),h||l.push({value:i.max,attrValue:e.mapping(i.invert(1)).join(""),color:e.mapping(i.invert(1)).join(""),scaleValue:1}),l.sort((function(t,e){return t.value-e.value}));var p={min:(0,r.YM)(l).value,max:(0,r.Z$)(l).value,colors:[],rail:{type:e.type},track:{}};"size"===e.type&&(p.track={style:{fill:"size"===e.type?this.view.getTheme().defaultColor:void 0}}),"color"===e.type&&(p.colors=l.map((function(t){return t.attrValue})));var d=this.container,f=g(o),v=(0,u.tb)(f),y=(0,r.U2)(o,"title");return y&&(y=(0,r.b$)({text:(0,c.oY)(i)},y)),p.container=d,p.layout=v,p.title=y,p.animateOption=a.pq,this.mergeLegendCfg(p,o,"continuous")},e.prototype.getCategoryCfg=function(t,e,i,o,s){var h=this.container,l=(0,r.U2)(o,"position",n.JR.BOTTOM),p=(0,u.Ps)(this.view.getTheme(),l),d=(0,r.U2)(p,["marker"]),g=(0,r.U2)(o,"marker"),f=(0,u.tb)(l),v=(0,r.U2)(p,["pageNavigator"]),y=(0,r.U2)(o,"pageNavigator"),m=s?(0,u.hC)(d,g,o.items):(0,u.Cv)(this.view,t,e,d,g),C=(0,r.U2)(o,"title");C&&(C=(0,r.b$)({text:i?(0,c.oY)(i):""},C));var w=(0,r.U2)(o,"maxWidthRatio"),x=(0,r.U2)(o,"maxHeightRatio"),b=this.getCategoryLegendSizeCfg(f,w,x);b.container=h,b.layout=f,b.items=m,b.title=C,b.animateOption=a.pq,b.pageNavigator=(0,r.b$)({},v,y);var T=this.mergeLegendCfg(b,o,l);T.reversed&&T.items.reverse();var S=(0,r.U2)(T,"maxItemWidth");return S&&S<=1&&(T.maxItemWidth=this.view.viewBBox.width*S),T},e.prototype.mergeLegendCfg=function(t,e,i){var o=i.split("-")[0],n=(0,u.Ps)(this.view.getTheme(),o);return(0,r.b$)({},n,t,e)},e.prototype.getId=function(t){return"".concat(this.name,"-").concat(t)},e.prototype.getComponentById=function(t){return(0,r.sE)(this.components,(function(e){return e.id===t}))},e.prototype.getCategoryLegendSizeCfg=function(t,e,i){void 0===e&&(e=n.mi),void 0===i&&(i=n.mi);var o=this.view.viewBBox,r=o.width,s=o.height;return"vertical"===t?{maxWidth:r*e,maxHeight:s}:{maxWidth:r,maxHeight:s*i}},e}(i(51097).Q);e.Z=f},96303:function(t,e,i){var o=i(29388),r=i(51097),n=i(47540),s=i(41172),a=i(55099),h=i(24625),l=i(54818),p=i(41648),u=function(t){function e(e){var i=t.call(this,e)||this;return i.onChangeFn=l.ZT,i.resetMeasure=function(){i.clear()},i.onValueChange=function(t){var e=t.ratio,o=i.getValidScrollbarCfg().animate;i.ratio=(0,l.uZ)(e,0,1);var r=i.view.getOptions().animate;o||i.view.animate(!1),i.changeViewData(i.getScrollRange(),!0),i.view.animate(r)},i.container=i.view.getLayer(h.JM.FORE).addGroup(),i.onChangeFn=(0,l.P2)(i.onValueChange,20,{leading:!0}),i.trackLen=0,i.thumbLen=0,i.ratio=0,i.view.on(h.ld.BEFORE_CHANGE_DATA,i.resetMeasure),i.view.on(h.ld.BEFORE_CHANGE_SIZE,i.resetMeasure),i}return(0,o.ZT)(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"scrollbar"},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.view.off(h.ld.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(h.ld.BEFORE_CHANGE_SIZE,this.resetMeasure)},e.prototype.init=function(){},e.prototype.render=function(){this.option=this.view.getOptions().scrollbar,this.option?this.scrollbar?this.scrollbar=this.updateScrollbar():(this.scrollbar=this.createScrollbar(),this.scrollbar.component.on("scrollchange",this.onChangeFn)):this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0)},e.prototype.layout=function(){var t=this;if(this.option&&!this.trackLen&&(this.measureScrollbar(),setTimeout((function(){t.view.destroyed||t.changeViewData(t.getScrollRange(),!0)}))),this.scrollbar){var e=this.view.coordinateBBox.width,i=this.scrollbar.component.get("padding"),r=this.scrollbar.component.getLayoutBBox(),n=new s.bK(r.x,r.y,Math.min(r.width,e),r.height).expand(i),l=this.getScrollbarComponentCfg(),p=void 0,u=void 0;if(l.isHorizontal){var c=(0,o.CR)((0,a.f)(this.view.viewBBox,n,h.JR.BOTTOM),2),d=(c[0],c[1]),g=(0,o.CR)((0,a.f)(this.view.coordinateBBox,n,h.JR.BOTTOM),2),f=g[0];g[1];p=f,u=d}else{var v=(0,o.CR)((0,a.f)(this.view.viewBBox,n,h.JR.RIGHT),2),y=(v[0],d=v[1],(0,o.CR)((0,a.f)(this.view.viewBBox,n,h.JR.RIGHT),2));f=y[0],y[1];p=f,u=d}p+=i[3],u+=i[0],this.trackLen?this.scrollbar.component.update((0,o.pi)((0,o.pi)({},l),{x:p,y:u,trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio})):this.scrollbar.component.update((0,o.pi)((0,o.pi)({},l),{x:p,y:u})),this.view.viewBBox=this.view.viewBBox.cut(n,l.isHorizontal?h.JR.BOTTOM:h.JR.RIGHT)}},e.prototype.update=function(){this.render()},e.prototype.getComponents=function(){return this.scrollbar?[this.scrollbar]:[]},e.prototype.clear=function(){this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0),this.trackLen=0,this.thumbLen=0,this.ratio=0,this.cnt=0,this.step=0,this.data=void 0,this.xScaleCfg=void 0,this.yScalesCfg=[]},e.prototype.setValue=function(t){this.onValueChange({ratio:t})},e.prototype.getValue=function(){return this.ratio},e.prototype.getThemeOptions=function(){var t=this.view.getTheme();return(0,l.U2)(t,["components","scrollbar","common"],{})},e.prototype.getScrollbarTheme=function(t){var e=(0,l.U2)(this.view.getTheme(),["components","scrollbar"]),i=t||{},r=i.thumbHighlightColor,n=(0,o._T)(i,["thumbHighlightColor"]);return{default:(0,l.b$)({},(0,l.U2)(e,["default","style"],{}),n),hover:(0,l.b$)({},(0,l.U2)(e,["hover","style"],{}),{thumbColor:r})}},e.prototype.measureScrollbar=function(){var t=this.view.getXScale(),e=this.view.getYScales().slice();this.data=this.getScrollbarData(),this.step=this.getStep(),this.cnt=this.getCnt();var i=this.getScrollbarComponentCfg(),o=i.trackLen,r=i.thumbLen;this.trackLen=o,this.thumbLen=r,this.xScaleCfg={field:t.field,values:t.values||[]},this.yScalesCfg=e},e.prototype.getScrollRange=function(){var t=Math.floor((this.cnt-this.step)*(0,l.uZ)(this.ratio,0,1));return[t,Math.min(t+this.step-1,this.cnt-1)]},e.prototype.changeViewData=function(t,e){var i=this,r=(0,o.CR)(t,2),n=r[0],s=r[1],a="vertical"!==this.getValidScrollbarCfg().type,h=(0,l.I)(this.data,this.xScaleCfg.field),u=this.view.getXScale().isLinear?h.sort((function(t,e){return Number(t)-Number(e)})):h,c=a?u:u.reverse();this.yScalesCfg.forEach((function(t){i.view.scale(t.field,{formatter:t.formatter,type:t.type,min:t.min,max:t.max,tickMethod:t.tickMethod})})),this.view.filter(this.xScaleCfg.field,(function(t){var e=c.indexOf(t);return!(e>-1)||(0,p.Kh)(e,n,s)})),this.view.render(!0)},e.prototype.createScrollbar=function(){var t="vertical"!==this.getValidScrollbarCfg().type,e=new n.LW((0,o.pi)((0,o.pi)({container:this.container},this.getScrollbarComponentCfg()),{x:0,y:0}));return e.init(),{component:e,layer:h.JM.FORE,direction:t?h.JR.BOTTOM:h.JR.RIGHT,type:h.TN.SCROLLBAR}},e.prototype.updateScrollbar=function(){var t=this.getScrollbarComponentCfg(),e=this.trackLen?(0,o.pi)((0,o.pi)({},t),{trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio}):(0,o.pi)({},t);return this.scrollbar.component.update(e),this.scrollbar},e.prototype.getStep=function(){if(this.step)return this.step;var t=this.view.coordinateBBox,e=this.getValidScrollbarCfg(),i=e.type,o=e.categorySize,r="vertical"!==i;return Math.floor((r?t.width:t.height)/o)},e.prototype.getCnt=function(){if(this.cnt)return this.cnt;var t=this.view.getXScale(),e=this.getScrollbarData(),i=(0,l.I)(e,t.field);return(0,l.dp)(i)},e.prototype.getScrollbarComponentCfg=function(){var t=this.view,e=t.coordinateBBox,i=t.viewBBox,r=this.getValidScrollbarCfg(),n=r.type,s=r.padding,a=r.width,h=r.height,p=r.style,u="vertical"!==n,c=(0,o.CR)(s,4),d=c[0],g=c[1],f=c[2],v=c[3],y=u?{x:e.minX+v,y:i.maxY-h-f}:{x:i.maxX-a-g,y:e.minY+d},m=this.getStep(),C=this.getCnt(),w=u?e.width-v-g:e.height-d-f,x=Math.max(w*(0,l.uZ)(m/C,0,1),20);return(0,o.pi)((0,o.pi)({},this.getThemeOptions()),{x:y.x,y:y.y,size:u?h:a,isHorizontal:u,trackLen:w,thumbLen:x,thumbOffset:0,theme:this.getScrollbarTheme(p)})},e.prototype.getValidScrollbarCfg=function(){var t={type:"horizontal",categorySize:32,width:8,height:8,padding:[0,0,0,0],animate:!0,style:{}};return(0,l.Kn)(this.option)&&(t=(0,o.pi)((0,o.pi)({},t),this.option)),(0,l.Kn)(this.option)&&this.option.padding||(t.padding=(t.type,[0,0,0,0])),t},e.prototype.getScrollbarData=function(){var t=this.view.getCoordinate(),e=this.getValidScrollbarCfg(),i=this.view.getOptions().data||[];return t.isReflect("y")&&"vertical"===e.type&&(i=(0,o.ev)([],(0,o.CR)(i),!1).reverse()),i},e}(r.Q);e.Z=u},96692:function(t,e,i){var o=i(29388),r=i(54818),n=i(24625),s=i(47540),a=i(41172),h=i(55099),l=i(41648),p=function(t){function e(e){var i=t.call(this,e)||this;return i.onChangeFn=r.ZT,i.resetMeasure=function(){i.clear()},i.onValueChange=function(t){var e=(0,o.CR)(t,2),r=e[0],n=e[1];i.start=r,i.end=n,i.changeViewData(r,n)},i.container=i.view.getLayer(n.JM.FORE).addGroup(),i.onChangeFn=(0,r.P2)(i.onValueChange,20,{leading:!0}),i.width=0,i.view.on(n.ld.BEFORE_CHANGE_DATA,i.resetMeasure),i.view.on(n.ld.BEFORE_CHANGE_SIZE,i.resetMeasure),i}return(0,o.ZT)(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"slider"},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.view.off(n.ld.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(n.ld.BEFORE_CHANGE_SIZE,this.resetMeasure)},e.prototype.init=function(){},e.prototype.render=function(){this.option=this.view.getOptions().slider;var t=this.getSliderCfg(),e=t.start,i=t.end;(0,r.UM)(this.start)&&(this.start=e,this.end=i);var o=this.view.getOptions().data;this.option&&!(0,r.xb)(o)?this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onChangeFn)):this.slider&&(this.slider.component.destroy(),this.slider=void 0)},e.prototype.layout=function(){var t=this;if(this.option&&!this.width&&(this.measureSlider(),setTimeout((function(){t.view.destroyed||t.changeViewData(t.start,t.end)}),0)),this.slider){var e=this.view.coordinateBBox.width,i=this.slider.component.get("padding"),r=(0,o.CR)(i,4),s=r[0],l=(r[1],r[2],r[3]),p=this.slider.component.getLayoutBBox(),u=new a.bK(p.x,p.y,Math.min(p.width,e),p.height).expand(i),c=this.getMinMaxText(this.start,this.end),d=c.minText,g=c.maxText,f=(0,o.CR)((0,h.f)(this.view.viewBBox,u,n.JR.BOTTOM),2),v=(f[0],f[1]),y=(0,o.CR)((0,h.f)(this.view.coordinateBBox,u,n.JR.BOTTOM),2),m=y[0];y[1];this.slider.component.update((0,o.pi)((0,o.pi)({},this.getSliderCfg()),{x:m+l,y:v+s,width:this.width,start:this.start,end:this.end,minText:d,maxText:g})),this.view.viewBBox=this.view.viewBBox.cut(u,n.JR.BOTTOM)}},e.prototype.update=function(){this.render()},e.prototype.createSlider=function(){var t=this.getSliderCfg(),e=new s.iR((0,o.pi)({container:this.container},t));return e.init(),{component:e,layer:n.JM.FORE,direction:n.JR.BOTTOM,type:n.TN.SLIDER}},e.prototype.updateSlider=function(){var t=this.getSliderCfg();if(this.width){var e=this.getMinMaxText(this.start,this.end),i=e.minText,r=e.maxText;t=(0,o.pi)((0,o.pi)({},t),{width:this.width,start:this.start,end:this.end,minText:i,maxText:r})}return this.slider.component.update(t),this.slider},e.prototype.measureSlider=function(){var t=this.getSliderCfg().width;this.width=t},e.prototype.getSliderCfg=function(){var t={height:16,start:0,end:1,minText:"",maxText:"",x:0,y:0,width:this.view.coordinateBBox.width};if((0,r.Kn)(this.option)){var e=(0,o.pi)({data:this.getData()},(0,r.U2)(this.option,"trendCfg",{}));t=(0,r.b$)({},t,this.getThemeOptions(),this.option),t=(0,o.pi)((0,o.pi)({},t),{trendCfg:e})}return t.start=(0,r.uZ)(Math.min((0,r.UM)(t.start)?0:t.start,(0,r.UM)(t.end)?1:t.end),0,1),t.end=(0,r.uZ)(Math.max((0,r.UM)(t.start)?0:t.start,(0,r.UM)(t.end)?1:t.end),0,1),t},e.prototype.getData=function(){var t=this.view.getOptions().data,e=(0,o.CR)(this.view.getYScales(),1)[0],i=this.view.getGroupScales();if(i.length){var r=i[0],n=r.field,s=r.ticks;return t.reduce((function(t,i){return i[n]===s[0]&&t.push(i[e.field]),t}),[])}return t.map((function(t){return t[e.field]||0}))},e.prototype.getThemeOptions=function(){var t=this.view.getTheme();return(0,r.U2)(t,["components","slider","common"],{})},e.prototype.getMinMaxText=function(t,e){var i=this.view.getOptions().data,o=this.view.getXScale(),n=(0,r.I)(i,o.field);o.isLinear&&(n=n.sort());var s=n,a=(0,r.dp)(i);if(!o||!a)return{};var h=(0,r.dp)(s),l=Math.round(t*(h-1)),p=Math.round(e*(h-1)),u=(0,r.U2)(s,[l]),c=(0,r.U2)(s,[p]),d=this.getSliderCfg().formatter;return d&&(u=d(u,i[l],l),c=d(c,i[p],p)),{minText:u,maxText:c}},e.prototype.changeViewData=function(t,e){var i=this.view.getOptions().data,o=this.view.getXScale(),n=(0,r.dp)(i);if(o&&n){var s=(0,r.I)(i,o.field),a=this.view.getXScale().isLinear?s.sort((function(t,e){return Number(t)-Number(e)})):s,h=a,p=(0,r.dp)(h),u=Math.round(t*(p-1)),c=Math.round(e*(p-1));this.view.filter(o.field,(function(t,e){var i=h.indexOf(t);return!(i>-1)||(0,l.Kh)(i,u,c)})),this.view.render(!0)}},e.prototype.getComponents=function(){return this.slider?[this.slider]:[]},e.prototype.clear=function(){this.slider&&(this.slider.component.destroy(),this.slider=void 0),this.width=0,this.start=void 0,this.end=void 0},e}(i(51097).Q);e.Z=p},96605:function(t,e,i){var o=i(29388),r=i(54818),n=i(47540),s=i(34482),a=i(83579),h=i(92515),l=i(41172),p=i(51097),u=i(15132);var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isLocked=!1,e}return(0,o.ZT)(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.isVisible=function(){return!1!==this.view.getOptions().tooltip},e.prototype.render=function(){},e.prototype.showTooltip=function(t){if(this.point=t,this.isVisible()){var e=this.view,i=this.getTooltipItems(t);if(i.length){var n=this.getTitle(i),s={x:i[0].x,y:i[0].y};e.emit("tooltip:show",u.Z.fromData(e,"tooltip:show",(0,o.pi)({items:i,title:n},t)));var a=this.getTooltipCfg(),h=a.follow,l=a.showMarkers,p=a.showCrosshairs,c=a.showContent,d=a.marker,g=this.items,f=this.title;if((0,r.Xy)(f,n)&&(0,r.Xy)(g,i)?(this.tooltip&&h&&(this.tooltip.update(t),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()):(e.emit("tooltip:change",u.Z.fromData(e,"tooltip:change",(0,o.pi)({items:i,title:n},t))),((0,r.mf)(c)?c(i):c)&&(this.tooltip||this.renderTooltip(),this.tooltip.update((0,r.CD)({},a,{items:this.getItemsAfterProcess(i),title:n},h?t:{})),this.tooltip.show()),l&&this.renderTooltipMarkers(i,d)),this.items=i,this.title=n,p){var v=(0,r.U2)(a,["crosshairs","follow"],!1);this.renderCrosshairs(v?t:s,a)}}else this.hideTooltip()}},e.prototype.hideTooltip=function(){if(this.getTooltipCfg().follow){var t=this.tooltipMarkersGroup;t&&t.hide();var e=this.xCrosshair,i=this.yCrosshair;e&&e.hide(),i&&i.hide();var o=this.tooltip;o&&o.hide(),this.view.emit("tooltip:hide",u.Z.fromData(this.view,"tooltip:hide",{})),this.point=null}else this.point=null},e.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},e.prototype.unlockTooltip=function(){this.isLocked=!1;var t=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(t.capture)},e.prototype.isTooltipLocked=function(){return this.isLocked},e.prototype.clear=function(){var t=this,e=t.tooltip,i=t.xCrosshair,o=t.yCrosshair,r=t.tooltipMarkersGroup;e&&(e.hide(),e.clear()),i&&i.clear(),o&&o.clear(),r&&r.clear(),(null===e||void 0===e?void 0:e.get("customContent"))&&(this.tooltip.destroy(),this.tooltip=null),this.title=null,this.items=null},e.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.reset()},e.prototype.reset=function(){this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},e.prototype.changeVisible=function(t){if(this.visible!==t){var e=this,i=e.tooltip,o=e.tooltipMarkersGroup,r=e.xCrosshair,n=e.yCrosshair;t?(i&&i.show(),o&&o.show(),r&&r.show(),n&&n.show()):(i&&i.hide(),o&&o.hide(),r&&r.hide(),n&&n.hide()),this.visible=t}},e.prototype.getTooltipItems=function(t){var e,i,n,s,a,h,l=this.findItemsFromView(this.view,t);if(l.length){l=(0,r.xH)(l);try{for(var p=(0,o.XA)(l),u=p.next();!u.done;u=p.next()){var c=u.value;try{for(var d=(n=void 0,(0,o.XA)(c)),g=d.next();!g.done;g=d.next()){var f=g.value,v=f.mappingData,y=v.x,m=v.y;f.x=(0,r.kJ)(y)?y[y.length-1]:y,f.y=(0,r.kJ)(m)?m[m.length-1]:m}}catch(B){n={error:B}}finally{try{g&&!g.done&&(s=d.return)&&s.call(d)}finally{if(n)throw n.error}}}}catch(L){e={error:L}}finally{try{u&&!u.done&&(i=p.return)&&i.call(p)}finally{if(e)throw e.error}}if(!1===this.getTooltipCfg().shared&&l.length>1){var C=l[0],w=Math.abs(t.y-C[0].y);try{for(var x=(0,o.XA)(l),b=x.next();!b.done;b=x.next()){var T=b.value,S=Math.abs(t.y-T[0].y);S<=w&&(C=T,w=S)}}catch(M){a={error:M}}finally{try{b&&!b.done&&(h=x.return)&&h.call(x)}finally{if(a)throw a.error}}l=[C]}return function(t){for(var e=[],i=function(i){var o=t[i];(0,r.sE)(e,(function(t){return t.color===o.color&&t.name===o.name&&t.value===o.value&&t.title===o.title}))||e.push(o)},o=0;o<t.length;o++)i(o);return e}((0,r.xH)(l))}return[]},e.prototype.layout=function(){},e.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var t=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}})}},e.prototype.isCursorEntered=function(t){if(this.tooltip){var e=this.tooltip.getContainer(),i=this.tooltip.get("capture");if(e&&i){var o=e.getBoundingClientRect(),r=o.x,n=o.y,s=o.width,a=o.height;return new l.bK(r,n,s,a).isPointIn(t)}}return!1},e.prototype.getTooltipCfg=function(){var t=this.view,e=t.getOptions().tooltip,i=this.processCustomContent(e),o=t.getTheme(),n=(0,r.U2)(o,["components","tooltip"],{}),s=(0,r.U2)(i,"enterable",n.enterable);return(0,r.b$)({},n,i,{capture:!(!s&&!this.isLocked)})},e.prototype.processCustomContent=function(t){if((0,r.jn)(t)||!(0,r.U2)(t,"customContent"))return t;var e=t.customContent;return(0,o.pi)((0,o.pi)({},t),{customContent:function(t,i){var o=e(t,i)||"";return(0,r.HD)(o)?'<div class="g2-tooltip">'+o+"</div>":o}})},e.prototype.getTitle=function(t){var e=t[0].title||t[0].name;return this.title=e,e},e.prototype.renderTooltip=function(){var t=this.view.getCanvas(),e={start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}},i=this.getTooltipCfg(),r=new n.P((0,o.pi)((0,o.pi)({parent:t.get("el").parentNode,region:e},i),{visible:!1,crosshairs:null}));r.init(),this.tooltip=r},e.prototype.renderTooltipMarkers=function(t,e){var i,n,a=this.getTooltipMarkersGroup(),h=this.view.getRootView(),l=h.limitInPlot;try{for(var p=(0,o.XA)(t),u=p.next();!u.done;u=p.next()){var c=u.value,d=c.x,g=c.y;if(l||(null===a||void 0===a?void 0:a.getClip())){var f=(0,s.GC)(h.getCoordinate()),v=f.type,y=f.attrs;null===a||void 0===a||a.setClip({type:v,attrs:y})}else null===a||void 0===a||a.setClip(void 0);var m=this.view.getTheme(),C=(0,r.U2)(m,["components","tooltip","marker"],{}),w=(0,o.pi)((0,o.pi)({fill:c.color,symbol:"circle",shadowColor:c.color},(0,r.mf)(e)?(0,o.pi)((0,o.pi)({},C),e(c)):e),{x:d,y:g});a.addShape("marker",{attrs:w})}}catch(x){i={error:x}}finally{try{u&&!u.done&&(n=p.return)&&n.call(p)}finally{if(i)throw i.error}}},e.prototype.renderCrosshairs=function(t,e){var i=(0,r.U2)(e,["crosshairs","type"],"x");"x"===i?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(t,e)):"y"===i?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(t,e)):"xy"===i&&(this.renderXCrosshairs(t,e),this.renderYCrosshairs(t,e))},e.prototype.renderXCrosshairs=function(t,e){var i,o,h=this.getViewWithGeometry(this.view).getCoordinate();if(h.isRect)h.isTransposed?(i={x:h.start.x,y:t.y},o={x:h.end.x,y:t.y}):(i={x:t.x,y:h.end.y},o={x:t.x,y:h.start.y});else{var l=(0,s.Oy)(h,t),p=h.getCenter(),u=h.getRadius();o=(0,a.op)(p.x,p.y,u,l),i=p}var c=(0,r.b$)({start:i,end:o,container:this.getTooltipCrosshairsGroup()},(0,r.U2)(e,"crosshairs",{}),this.getCrosshairsText("x",t,e));delete c.type;var d=this.xCrosshair;d?d.update(c):(d=new n.YS.Line(c)).init(),d.render(),d.show(),this.xCrosshair=d},e.prototype.renderYCrosshairs=function(t,e){var i,o,a=this.getViewWithGeometry(this.view).getCoordinate();if(a.isRect){var h=void 0,l=void 0;a.isTransposed?(h={x:t.x,y:a.end.y},l={x:t.x,y:a.start.y}):(h={x:a.start.x,y:t.y},l={x:a.end.x,y:t.y}),i={start:h,end:l},o="Line"}else i={center:a.getCenter(),radius:(0,s.zY)(a,t),startAngle:a.startAngle,endAngle:a.endAngle},o="Circle";delete(i=(0,r.b$)({container:this.getTooltipCrosshairsGroup()},i,(0,r.U2)(e,"crosshairs",{}),this.getCrosshairsText("y",t,e))).type;var p=this.yCrosshair;p?a.isRect&&"circle"===p.get("type")||!a.isRect&&"line"===p.get("type")?(p=new n.YS[o](i)).init():p.update(i):(p=new n.YS[o](i)).init(),p.render(),p.show(),this.yCrosshair=p},e.prototype.getCrosshairsText=function(t,e,i){var o=(0,r.U2)(i,["crosshairs","text"]),n=(0,r.U2)(i,["crosshairs","follow"]),s=this.items;if(o){var a=this.getViewWithGeometry(this.view),h=s[0],l=a.getXScale(),p=a.getYScales()[0],u=void 0,c=void 0;if(n){var d=this.view.getCoordinate().invert(e);u=l.invert(d.x),c=p.invert(d.y)}else u=h.data[l.field],c=h.data[p.field];var g="x"===t?u:c;return(0,r.mf)(o)?o=o(t,g,s,e):o.content=g,{text:o}}},e.prototype.getGuideGroup=function(){if(!this.guideGroup){var t=this.view.foregroundGroup;this.guideGroup=t.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},e.prototype.getTooltipMarkersGroup=function(){var t=this.tooltipMarkersGroup;return t&&!t.destroyed?(t.clear(),t.show()):((t=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"})).toFront(),this.tooltipMarkersGroup=t),t},e.prototype.getTooltipCrosshairsGroup=function(){var t=this.tooltipCrosshairsGroup;return t||((t=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1})).toBack(),this.tooltipCrosshairsGroup=t),t},e.prototype.findItemsFromView=function(t,e){var i,r;if(!1===t.getOptions().tooltip)return[];var n=this.getTooltipCfg(),s=(0,h.XQ)(t,e,n);try{for(var a=(0,o.XA)(t.views),l=a.next();!l.done;l=a.next()){var p=l.value;s=s.concat(this.findItemsFromView(p,e))}}catch(u){i={error:u}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return s},e.prototype.getViewWithGeometry=function(t){var e=this;return t.geometries.length?t:(0,r.sE)(t.views,(function(t){return e.getViewWithGeometry(t)}))},e.prototype.getItemsAfterProcess=function(t){var e=this.getTooltipCfg().customItems;return(e||function(t){return t})(t)},e}(p.Q);e.Z=c},15132:function(t,e,i){var o=i(47540),r=function(){function t(t,e,i){this.view=t,this.gEvent=e,this.data=i,this.type=e.type}return t.fromData=function(e,i,r){return new t(e,new o.ju(i,{}),r)},Object.defineProperty(t.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[Event (type=".concat(this.type,")]")},t.prototype.clone=function(){return new t(this.view,this.gEvent,this.data)},t}();e.Z=r},31002:function(t,e,i){i.d(e,{ak:function(){return s.ak},dZ:function(){return r.dZ},ju:function(){return n.Z},kL:function(){return o.Z}});var o=i(83124),r=i(95438),n=i(15132),s=i(40849)}}]);
//# sourceMappingURL=5726.55e5d2ae.js.map