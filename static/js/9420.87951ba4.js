"use strict";(self.webpackChunkjx3dps_online=self.webpackChunkjx3dps_online||[]).push([[9420],{52019:function(t,n,e){e.d(n,{aU:function(){return r.Z},zl:function(){return i.zl}});var r=e(7852),i=e(94704)},37666:function(t,n,e){var r=e(29388),i=e(54818),o=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.maskShape=null,n.points=[],n.starting=!1,n.moving=!1,n.preMovePoint=null,n.shapeType="path",n}return(0,r.ZT)(n,t),n.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},n.prototype.emitEvent=function(t){var n="mask:".concat(t),e=this.context.view,r=this.context.event;e.emit(n,{target:this.maskShape,shape:this.maskShape,points:this.points,x:r.x,y:r.y})},n.prototype.createMask=function(){var t=this.context.view,n=this.getMaskAttrs();return t.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:(0,r.pi)({fill:"#C5D4EB",opacity:.3},n)})},n.prototype.getMaskPath=function(){return[]},n.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},n.prototype.start=function(t){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(null===t||void 0===t?void 0:t.maskStyle),this.emitEvent("start")},n.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},n.prototype.move=function(){if(this.moving&&this.maskShape){var t=this.getCurrentPoint(),n=this.preMovePoint,e=t.x-n.x,r=t.y-n.y,o=this.points;(0,i.S6)(o,(function(t){t.x+=e,t.y+=r})),this.updateMask(),this.emitEvent("change"),this.preMovePoint=t}},n.prototype.updateMask=function(t){var n=(0,i.b$)({},this.getMaskAttrs(),t);this.maskShape.attr(n)},n.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},n.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},n.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},n.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},n.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,t.prototype.destroy.call(this)},n}(e(7852).Z);n.Z=o},20742:function(t,n,e){e.d(n,{z:function(){return u}});var r=e(29388),i=e(54818),o=e(68245);function u(t){var n=(0,i.Z$)(t),e=0,r=0,u=0;if(t.length){var s=t[0];e=(0,o.TE)(s,n)/2,r=(n.x+s.x)/2,u=(n.y+s.y)/2}return{x:r,y:u,r:e}}var s=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.shapeType="circle",n}return(0,r.ZT)(n,t),n.prototype.getMaskAttrs=function(){return u(this.points)},n}(e(37666).Z);n.Z=s},65061:function(t,n,e){e.d(n,{u:function(){return u}});var r=e(29388),i=e(54818);function o(t){t.x=(0,i.uZ)(t.x,0,1),t.y=(0,i.uZ)(t.y,0,1)}function u(t,n,e,r){var u=null,s=null,a=r.invert((0,i.YM)(t)),h=r.invert((0,i.Z$)(t));return e&&(o(a),o(h)),"x"===n?(u=r.convert({x:a.x,y:0}),s=r.convert({x:h.x,y:1})):(u=r.convert({x:0,y:a.y}),s=r.convert({x:1,y:h.y})),{start:u,end:s}}var s=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.dim="x",n.inPlot=!0,n}return(0,r.ZT)(n,t),n.prototype.getRegion=function(){var t=this.context.view.getCoordinate();return u(this.points,this.dim,this.inPlot,t)},n}(e(11454).ZP);n.Z=s},76693:function(t,n,e){var r=e(29388),i=e(54818),o=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.maskShapes=[],n.starting=!1,n.moving=!1,n.recordPoints=null,n.preMovePoint=null,n.shapeType="path",n.maskType="multi-mask",n}return(0,r.ZT)(n,t),n.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},n.prototype.emitEvent=function(t){var n="".concat(this.maskType,":").concat(t),e=this.context.view,r=this.context.event,i={type:this.shapeType,name:this.maskType,get:function(t){return i.hasOwnProperty(t)?i[t]:void 0}};e.emit(n,{target:i,maskShapes:this.maskShapes,multiPoints:this.recordPoints,x:r.x,y:r.y})},n.prototype.createMask=function(t){var n=this.context.view,e=this.recordPoints[t],i=this.getMaskAttrs(e),o=n.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:(0,r.pi)({fill:"#C5D4EB",opacity:.3},i)});this.maskShapes.push(o)},n.prototype.getMaskPath=function(t){return[]},n.prototype.show=function(){this.maskShapes.length>0&&(this.maskShapes.forEach((function(t){return t.show()})),this.emitEvent("show"))},n.prototype.start=function(t){this.recordPointStart(),this.starting=!0,this.moving=!1;var n=this.recordPoints.length-1;this.createMask(n),this.updateShapesCapture(!1),this.updateMask(null===t||void 0===t?void 0:t.maskStyle),this.emitEvent("start")},n.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint(),this.updateShapesCapture(!1)},n.prototype.move=function(){if(this.moving&&0!==this.maskShapes.length){var t=this.getCurrentPoint(),n=this.preMovePoint,e=t.x-n.x,r=t.y-n.y,i=this.getCurMaskShapeIndex();i>-1&&(this.recordPoints[i].forEach((function(t){t.x+=e,t.y+=r})),this.updateMask(),this.emitEvent("change"),this.preMovePoint=t)}},n.prototype.updateMask=function(t){var n=this;this.recordPoints.forEach((function(e,r){var o=(0,i.b$)({},n.getMaskAttrs(e),t);n.maskShapes[r].attr(o)}))},n.prototype.resize=function(){this.starting&&this.maskShapes.length>0&&(this.recordPointContinue(),this.updateMask(),this.emitEvent("change"))},n.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null,this.updateShapesCapture(!0)},n.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.updateShapesCapture(!0)},n.prototype.hide=function(){this.maskShapes.length>0&&(this.maskShapes.forEach((function(t){return t.hide()})),this.emitEvent("hide"))},n.prototype.remove=function(){var t=this.getCurMaskShapeIndex();t>-1&&(this.recordPoints.splice(t,1),this.maskShapes[t].remove(),this.maskShapes.splice(t,1),this.preMovePoint=null,this.updateShapesCapture(!0),this.emitEvent("change"))},n.prototype.clearAll=function(){this.recordPointClear(),this.maskShapes.forEach((function(t){return t.remove()})),this.maskShapes=[],this.preMovePoint=null},n.prototype.clear=function(){var t=this.getCurMaskShapeIndex();-1===t?(this.recordPointClear(),this.maskShapes.forEach((function(t){return t.remove()})),this.maskShapes=[],this.emitEvent("clearAll")):(this.recordPoints.splice(t,1),this.maskShapes[t].remove(),this.maskShapes.splice(t,1),this.preMovePoint=null,this.emitEvent("clearSingle")),this.preMovePoint=null},n.prototype.destroy=function(){this.clear(),t.prototype.destroy.call(this)},n.prototype.getRecordPoints=function(){var t;return(0,r.ev)([],(0,r.CR)(null!==(t=this.recordPoints)&&void 0!==t?t:[]),!1)},n.prototype.recordPointStart=function(){var t=this.getRecordPoints(),n=this.getCurrentPoint();this.recordPoints=(0,r.ev)((0,r.ev)([],(0,r.CR)(t),!1),[[n]],!1)},n.prototype.recordPointContinue=function(){var t=this.getRecordPoints(),n=this.getCurrentPoint(),e=t.splice(-1,1)[0]||[];e.push(n),this.recordPoints=(0,r.ev)((0,r.ev)([],(0,r.CR)(t),!1),[e],!1)},n.prototype.recordPointClear=function(){this.recordPoints=[]},n.prototype.updateShapesCapture=function(t){this.maskShapes.forEach((function(n){return n.set("capture",t)}))},n.prototype.getCurMaskShapeIndex=function(){var t=this.getCurrentPoint();return this.maskShapes.findIndex((function(n){var e=n.attrs,r=e.width,i=e.height,o=e.r;return!(0===r||0===i||0===o)&&n.isHit(t.x,t.y)}))},n}(e(7852).Z);n.Z=o},93964:function(t,n,e){var r=e(29388),i=e(76693),o=e(20742),u=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.shapeType="circle",n.getMaskAttrs=o.z,n}return(0,r.ZT)(n,t),n}(i.Z);n.Z=u},53303:function(t,n,e){var r=e(29388),i=e(19956),o=e(65061),u=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.dim="x",n.inPlot=!0,n}return(0,r.ZT)(n,t),n.prototype.getRegion=function(t){var n=this.context.view.getCoordinate();return(0,o.u)(t,this.dim,this.inPlot,n)},n}(i.Z);n.Z=u},49374:function(t,n,e){var r=e(29388),i=e(76693),o=e(21371),u=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.getMaskPath=o.EW,n.getMaskAttrs=o.zj,n}return(0,r.ZT)(n,t),n.prototype.addPoint=function(){this.resize()},n}(i.Z);n.Z=u},19956:function(t,n,e){var r=e(29388),i=e(76693),o=e(11454),u=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.shapeType="rect",n}return(0,r.ZT)(n,t),n.prototype.getRegion=function(t){return(0,o.ur)(t)},n.prototype.getMaskAttrs=function(t){var n=this.getRegion(t),e=n.start,r=n.end;return(0,o.zj)(e,r)},n}(i.Z);n.Z=u},63561:function(t,n,e){var r=e(29388),i=e(49374),o=e(48086),u=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.getMaskPath=o.EW,n.getMaskAttrs=o.zj,n}return(0,r.ZT)(n,t),n}(i.Z);n.Z=u},21371:function(t,n,e){e.d(n,{EW:function(){return o},zj:function(){return u}});var r=e(29388),i=e(54818);function o(t){var n=[];return t.length&&((0,i.S6)(t,(function(t,e){0===e?n.push(["M",t.x,t.y]):n.push(["L",t.x,t.y])})),n.push(["L",t[0].x,t[0].y])),n}function u(t){return{path:o(t)}}var s=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(n,t),n.prototype.getMaskPath=function(){return o(this.points)},n.prototype.getMaskAttrs=function(){return u(this.points)},n.prototype.addPoint=function(){this.resize()},n}(e(37666).Z);n.ZP=s},11454:function(t,n,e){e.d(n,{ur:function(){return o},zj:function(){return u}});var r=e(29388),i=e(54818);function o(t){return{start:(0,i.YM)(t),end:(0,i.Z$)(t)}}function u(t,n){return{x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),width:Math.abs(n.x-t.x),height:Math.abs(n.y-t.y)}}var s=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.shapeType="rect",n}return(0,r.ZT)(n,t),n.prototype.getRegion=function(){return o(this.points)},n.prototype.getMaskAttrs=function(){var t=this.getRegion();return u(t.start,t.end)},n}(e(37666).Z);n.ZP=s},48086:function(t,n,e){e.d(n,{EW:function(){return o},zj:function(){return u}});var r=e(29388),i=e(68245);function o(t){return(0,i.G1)(t,!0)}function u(t){return{path:o(t)}}var s=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(n,t),n.prototype.getMaskPath=function(){return o(this.points)},n.prototype.getMaskAttrs=function(){return u(this.points)},n}(e(21371).ZP);n.ZP=s},94704:function(t,n,e){e.d(n,{PH:function(){return o},pu:function(){return s},zl:function(){return u}});var r=e(64029),i=(e(54818),{});function o(t,n){var e=i[t],r=null;e&&((r=new(0,e.ActionClass)(n,e.cfg)).name=t,r.init());return r}function u(t,n,e){i[t]={ActionClass:n,cfg:e}}function s(t,n){var e=new r.Z(n);return e.callback=t,e.name="callback",e}},68245:function(t,n,e){e.d(n,{$3:function(){return P},$F:function(){return $},$l:function(){return j},A2:function(){return R},A9:function(){return M},By:function(){return Z},G1:function(){return B},OQ:function(){return A},QZ:function(){return k},RA:function(){return b},TE:function(){return z},UE:function(){return x},Y:function(){return C},ZJ:function(){return f},cm:function(){return E},eA:function(){return d},gj:function(){return l},i$:function(){return Y},iZ:function(){return g},j0:function(){return v},nq:function(){return m},tm:function(){return y}});var r=e(54818),i=e(40186),o=e(41172),u=e(13313);function s(t,n){return h(t.event.target,n)}function a(t,n){var e=t.getCanvasBBox(),r=e.width,i=e.height;return r>0&&i>0&&(r>=n||i>=n)}function h(t,n){var e=t.getCanvasBBox();return a(t,n)?e:null}function p(t,n){return t.event.maskShapes.map((function(t){return h(t,n)})).filter((function(t){return!!t}))}function c(t,n){return a(t,n)?t.attr("path"):null}function f(t){var n,e=t.event.target;return e&&(n=e.get("element")),n}function v(t){var n,e=t.event.target;return e&&(n=e.get("delegateObject")),n}function l(t){var n=t.event.gEvent;return!(n&&n.fromShape&&n.toShape&&n.fromShape.get("element")===n.toShape.get("element"))}function m(t){return t&&t.component&&t.component.isList()}function y(t){return t&&t.component&&t.component.isSlider()}function g(t){var n=t.event.target;return n&&"mask"===(null===n||void 0===n?void 0:n.get("name"))||d(t)}function d(t){var n;return"multi-mask"===(null===(n=t.event.target)||void 0===n?void 0:n.get("name"))}function k(t,n){var e=t.event.target;if(d(t))return function(t,n){if("path"===t.event.target.get("type")){var e=function(t,n){return t.event.maskShapes.map((function(t){return c(t,n)}))}(t,n);return e.length>0?e.flatMap((function(n){return T(t.view,n)})):null}var r=p(t,n);if(r.length>0)return r.flatMap((function(n){return E(t.view,n)}));return null}(t,n);if("path"===e.get("type")){var r=function(t,n){return c(t.event.target,n)}(t,n);if(!r)return;return T(t.view,r)}var i=s(t,n);return i?E(t.view,i):null}function x(t,n,e){if(d(t))return function(t,n,e){var r=p(t,e);if(r.length>0)return r.flatMap((function(e){return S(e,t,n)}));return null}(t,n,e);var r=s(t,e);return r?S(r,t,n):null}function S(t,n,e){var r=n.view,i=b(r,e,{x:t.x,y:t.y}),o=b(r,e,{x:t.maxX,y:t.maxY});return E(e,{minX:i.x,minY:i.y,maxX:o.x,maxY:o.y})}function P(t){var n=t.geometries,e=[];return(0,r.S6)(n,(function(t){var n=t.elements;e=e.concat(n)})),t.views&&t.views.length&&(0,r.S6)(t.views,(function(t){e=e.concat(P(t))})),e}function M(t,n,e){return P(t).filter((function(t){return C(t,n)===e}))}function Z(t,n){var e=t.geometries,i=[];return(0,r.S6)(e,(function(t){var e=t.getElementsBy((function(t){return t.hasState(n)}));i=i.concat(e)})),i}function C(t,n){var e=t.getModel().data;return(0,r.kJ)(e)?e[0][n]:e[n]}function E(t,n){var e=P(t),i=[];return(0,r.S6)(e,(function(t){var e,r,o=t.shape.getCanvasBBox();e=n,(r=o).minX>e.maxX||r.maxX<e.minX||r.minY>e.maxY||r.maxY<e.minY||i.push(t)})),i}function w(t){var n=[];return(0,r.S6)(t,(function(t){if("A"!==t[0])for(var e=1;e<t.length;e+=2)n.push([t[e],t[e+1]]);else{var r=t.length;n.push([t[r-2],t[r-1]])}})),n}function T(t,n){var e=P(t),r=w(n);return e.filter((function(t){var n,e=t.shape;if("path"===e.get("type"))n=w(e.attr("path"));else{var i=e.getCanvasBBox();n=(0,o.Yu)(i)}return(0,u.Wq)(r,n)}))}function A(t){return t.getComponents().map((function(t){return t.component}))}function z(t,n){var e=n.x-t.x,r=n.y-t.y;return Math.sqrt(e*e+r*r)}function B(t,n){if(t.length<=2)return(0,i.O4)(t,!1);var e=t[0],o=[];(0,r.S6)(t,(function(t){o.push(t.x),o.push(t.y)}));var u=(0,i.YK)(o,n,null);return u.unshift(["M",e.x,e.y]),u}function R(t,n){return t.x<=n.x&&t.maxX>=n.x&&t.y<=n.y&&t.maxY>n.y}function Y(t){var n=t.parent,e=null;return n&&(e=n.views.filter((function(n){return n!==t}))),e}function b(t,n,e){var r=function(t,n){return t.getCoordinate().invert(n)}(t,e);return n.getCoordinate().convert(r)}function j(t,n,e,i){var o=!1;return(0,r.S6)(t,(function(t){if(t[e]===n[e]&&t[i]===n[i])return o=!0,!1})),o}function $(t,n){var e=t.getScaleByField(n);return!e&&t.views&&(0,r.S6)(t.views,(function(t){if(e=$(t,n))return!1})),e}}}]);
//# sourceMappingURL=9420.87951ba4.js.map