"use strict";(self.webpackChunkjx3dps_online=self.webpackChunkjx3dps_online||[]).push([[5736],{25680:function(t,e,r){var n=r(29388),i=r(34494),o=r(44600),a=r(45044),s=r(72845),h=r(46791),p=r(67662),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,n.ZT)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.renderer="canvas",e.autoDraw=!0,e.localRefresh=!0,e.refreshElements=[],e.clipView=!0,e.quickHit=!1,e},e.prototype.onCanvasChange=function(t){"attr"!==t&&"sort"!==t&&"changeSize"!==t||(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return a},e.prototype.getGroupBase=function(){return s.Z},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||(0,h.mX)();return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return this.set("context",e),t},e.prototype.setDOMSize=function(e,r){t.prototype.setDOMSize.call(this,e,r);var n=this.get("context"),i=this.get("el"),o=this.getPixelRatio();i.width=o*e,i.height=o*r,o>1&&n.scale(o,o)},e.prototype.clear=function(){t.prototype.clear.call(this),this._clearFrame();var e=this.get("context"),r=this.get("el");e.clearRect(0,0,r.width,r.height)},e.prototype.getShape=function(e,r){return this.get("quickHit")?(0,o.u)(this,e,r):t.prototype.getShape.call(this,e,r,null)},e.prototype._getRefreshRegion=function(){var t,e=this.get("refreshElements"),r=this.getViewRange();e.length&&e[0]===this?t=r:(t=(0,p.tJ)(e))&&(t.minX=Math.floor(t.minX),t.minY=Math.floor(t.minY),t.maxX=Math.ceil(t.maxX),t.maxY=Math.ceil(t.maxY),t.maxY+=1,this.get("clipView")&&(t=(0,p.T2)(t,r)));return t},e.prototype.refreshElement=function(t){this.get("refreshElements").push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,h.VS)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),e=this.get("el"),r=this.getChildren();t.clearRect(0,0,e.width,e.height),(0,p.DE)(t,this),(0,p.NX)(t,r),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),e=this.get("refreshElements"),r=this.getChildren(),n=this._getRefreshRegion();n?(t.clearRect(n.minX,n.minY,n.maxX-n.minX,n.maxY-n.minY),t.save(),t.beginPath(),t.rect(n.minX,n.minY,n.maxX-n.minX,n.maxY-n.minY),t.clip(),(0,p.DE)(t,this),(0,p.kU)(this,r,n),(0,p.NX)(t,r,n),t.restore()):e.length&&(0,p.sT)(e),(0,h.S6)(e,(function(t){t.get("hasChanged")&&t.set("hasChanged",!1)})),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,e=this.get("drawFrame");e||(e=(0,h.U7)((function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)})),this.set("drawFrame",e))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(i.AbstractCanvas);e.Z=u},72845:function(t,e,r){var n=r(29388),i=r(34494),o=r(45044),a=r(67662),s=r(54818),h=r(46791),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,n.ZT)(e,t),e.prototype.onCanvasChange=function(t){(0,a.md)(this,t)},e.prototype.getShapeBase=function(){return o},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,e){e&&(t.save(),(0,a.DE)(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,e=[],r=[];(0,s.S6)(t,(function(t){var n=t.cfg.cacheCanvasBBox;n&&t.cfg.isInView&&(e.push(n.minX,n.maxX),r.push(n.minY,n.maxY))}));var n=null;if(e.length){var i=(0,s.VV)(e),o=(0,s.Fp)(e),a=(0,s.VV)(r),p=(0,s.Fp)(r);n={minX:i,minY:a,x:i,y:a,maxX:o,maxY:p,width:o-i,height:p-a};var u=this.cfg.canvas;if(u){var c=u.getViewRange();this.set("isInView",(0,h.qb)(n,c))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",n)},e.prototype.draw=function(t,e){var r=this.cfg.children,n=!e||this.cfg.refresh;r.length&&n&&(t.save(),(0,a.DE)(t,this),this._applyClip(t,this.getClip()),(0,a.NX)(t,r,e),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(i.AbstractGroup);e.Z=p},85736:function(t,e,r){r.r(e),r.d(e,{Canvas:function(){return s.Z},Group:function(){return h.Z},Shape:function(){return n},getArcParams:function(){return p.Z},version:function(){return u}});var n=r(45044),i=r(34494),o={};for(var a in i)["default","Canvas","Group","Shape","getArcParams","version"].indexOf(a)<0&&(o[a]=function(t){return i[t]}.bind(0,a));r.d(e,o);var s=r(25680),h=r(72845),p=r(16520),u="0.5.12"},45044:function(t,e,r){r.r(e),r.d(e,{Base:function(){return u},Circle:function(){return l},Ellipse:function(){return y},Image:function(){return x},Line:function(){return P},Marker:function(){return D},Path:function(){return L},Polygon:function(){return O},Polyline:function(){return E},Rect:function(){return K},Text:function(){return z}});var n={};r.r(n),r.d(n,{Base:function(){return u},Circle:function(){return l},Ellipse:function(){return y},Image:function(){return x},Line:function(){return P},Marker:function(){return D},Path:function(){return L},Polygon:function(){return O},Polyline:function(){return E},Rect:function(){return K},Text:function(){return z}});var i=r(29388),o=r(34494),a=r(46791),s=r(67662),h=r(72845),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,i.pi)((0,i.pi)({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return n},e.prototype.getGroupBase=function(){return h.Z},e.prototype.onCanvasChange=function(t){(0,s.md)(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),e=this.getHitLineWidth(),r=(0,o.getBBoxMethod)(t)(this),n=e/2,i=r.x-n,a=r.y-n,s=r.x+r.width+n,h=r.y+r.height+n;return{x:i,minX:i,y:a,minY:a,width:r.width+e,height:r.height+e,maxX:s,maxY:h}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,e){e&&(t.save(),(0,s.DE)(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},e.prototype.draw=function(t,e){var r=this.cfg.clipShape;if(e){if(!1===this.cfg.refresh)return void this.set("hasChanged",!1);var n=this.getCanvasBBox();if(!(0,a.qb)(e,n))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}t.save(),(0,s.DE)(t,this),this._applyClip(t,r),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var e=this.getCanvasBBox(),r=(0,a.qb)(e,t);this.set("isInView",r),r?this.set("cacheCanvasBBox",e):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var e=this.attrs,r=e.lineWidth,n=e.opacity,i=e.strokeOpacity,o=e.fillOpacity;this.isFill()&&((0,a.kK)(o)||1===o?this.fill(t):(t.globalAlpha=o,this.fill(t),t.globalAlpha=n)),this.isStroke()&&r>0&&((0,a.kK)(i)||1===i||(t.globalAlpha=i),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,e){var r=this.isStroke(),n=this.isFill(),i=this.getHitLineWidth();return this.isInStrokeOrPath(t,e,r,n,i)},e.prototype.isInStrokeOrPath=function(t,e,r,n,i){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(o.AbstractShape),u=p,c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,i.pi)((0,i.pi)({},e),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,e,r,n,i){var o=this.attr(),s=o.x,h=o.y,p=o.r,u=i/2,c=(0,a.TE)(s,h,t,e);return n&&r?c<=p+u:n?c<=p:!!r&&(c>=p-u&&c<=p+u)},e.prototype.createPath=function(t){var e=this.attr(),r=e.x,n=e.y,i=e.r;t.beginPath(),t.arc(r,n,i,0,2*Math.PI,!1),t.closePath()},e}(u),l=c;function f(t,e,r,n){return t/(r*r)+e/(n*n)}var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,i.pi)((0,i.pi)({},e),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,e,r,n,i){var o=this.attr(),a=i/2,s=o.x,h=o.y,p=o.rx,u=o.ry,c=(t-s)*(t-s),l=(e-h)*(e-h);return n&&r?f(c,l,p+a,u+a)<=1:n?f(c,l,p,u)<=1:!!r&&(f(c,l,p-a,u-a)>=1&&f(c,l,p+a,u+a)<=1)},e.prototype.createPath=function(t){var e=this.attr(),r=e.x,n=e.y,i=e.rx,o=e.ry;if(t.beginPath(),t.ellipse)t.ellipse(r,n,i,o,0,0,2*Math.PI,!1);else{var a=i>o?i:o,s=i>o?1:i/o,h=i>o?o/i:1;t.save(),t.translate(r,n),t.scale(s,h),t.arc(0,0,a,0,2*Math.PI),t.restore(),t.closePath()}},e}(u),y=g;function v(t){return t instanceof HTMLElement&&(0,a.HD)(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase()}var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,i.pi)((0,i.pi)({},e),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(!0===this.get("toDraw")){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var e=this,r=this.attrs;if((0,a.HD)(t)){var n=new Image;n.onload=function(){if(e.destroyed)return!1;e.attr("img",n),e.set("loading",!1),e._afterLoading();var t=e.get("callback");t&&t.call(e)},n.crossOrigin="Anonymous",n.src=t,this.set("loading",!0)}else t instanceof Image?(r.width||(r.width=t.width),r.height||(r.height=t.height)):v(t)&&(r.width||(r.width=Number(t.getAttribute("width"))),r.height||(r.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(e,r,n){t.prototype.onAttrChange.call(this,e,r,n),"img"===e&&this._setImage(r)},e.prototype.createPath=function(t){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",t);var e=this.attr(),r=e.x,n=e.y,i=e.width,o=e.height,s=e.sx,h=e.sy,p=e.swidth,u=e.sheight,c=e.img;(c instanceof Image||v(c))&&((0,a.kK)(s)||(0,a.kK)(h)||(0,a.kK)(p)||(0,a.kK)(u)?t.drawImage(c,r,n,i,o):t.drawImage(c,s,h,p,u,r,n,i,o))},e}(u),x=d,w=r(41622),m=r(61285),A=r(34414),C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,i.pi)((0,i.pi)({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(e,r,n){t.prototype.onAttrChange.call(this,e,r,n),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),e=t.x1,r=t.y1,n=t.x2,i=t.y2,o=t.startArrow,a=t.endArrow;o&&A.Yf(this,t,n,i,e,r),a&&A.YR(this,t,e,r,n,i)},e.prototype.isInStrokeOrPath=function(t,e,r,n,i){if(!r||!i)return!1;var o=this.attr(),a=o.x1,s=o.y1,h=o.x2,p=o.y2;return(0,m.Z)(a,s,h,p,i,t,e)},e.prototype.createPath=function(t){var e=this.attr(),r=e.x1,n=e.y1,i=e.x2,o=e.y2,a=e.startArrow,s=e.endArrow,h={dx:0,dy:0},p={dx:0,dy:0};a&&a.d&&(h=A.jF(r,n,i,o,e.startArrow.d)),s&&s.d&&(p=A.jF(r,n,i,o,e.endArrow.d)),t.beginPath(),t.moveTo(r+h.dx,n+h.dy),t.lineTo(i-p.dx,o-p.dy)},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),r=this.get("endArrowShape");e&&e.draw(t),r&&r.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,r=t.y1,n=t.x2,i=t.y2;return w.x1.length(e,r,n,i)},e.prototype.getPoint=function(t){var e=this.attr(),r=e.x1,n=e.y1,i=e.x2,o=e.y2;return w.x1.pointAt(r,n,i,o,t)},e}(u),P=C,S=r(54818),T=r(13313),_={circle:function(t,e,r){return[["M",t-r,e],["A",r,r,0,1,0,t+r,e],["A",r,r,0,1,0,t-r,e]]},square:function(t,e,r){return[["M",t-r,e-r],["L",t+r,e-r],["L",t+r,e+r],["L",t-r,e+r],["Z"]]},diamond:function(t,e,r){return[["M",t-r,e],["L",t,e-r],["L",t+r,e],["L",t,e+r],["Z"]]},triangle:function(t,e,r){var n=r*Math.sin(1/3*Math.PI);return[["M",t-r,e+n],["L",t,e-n],["L",t+r,e+n],["Z"]]},"triangle-down":function(t,e,r){var n=r*Math.sin(1/3*Math.PI);return[["M",t-r,e-n],["L",t+r,e-n],["L",t,e+n],["Z"]]}},k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(e,r,n){t.prototype.onAttrChange.call(this,e,r,n),-1!==["symbol","x","y","r","radius"].indexOf(e)&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return(0,S.UM)(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t,r,n=this.attr(),i=n.x,o=n.y,s=n.symbol||"circle",h=this._getR(n);if((0,a.mf)(s))r=(t=s)(i,o,h),r=(0,T.wb)(r);else{if(!(t=e.Symbols[s]))return console.warn(s+" marker is not supported."),null;r=t(i,o,h)}return r},e.prototype.createPath=function(t){var e=this._getPath(),r=this.get("paramsCache");(0,s.MC)(this,t,{path:e},r)},e.Symbols=_,e}(u),D=k,B=r(587),b=r(29925),I=r(93765);function Z(t,e,r){for(var n=!1,i=0;i<t.length;i++){var o=t[i];if(n=(0,b.Z)(o,e,r))break}return n}var M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,i.pi)((0,i.pi)({},e),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(e,r,n){t.prototype.onAttrChange.call(this,e,r,n),"path"===e&&this._setPathArr(r),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=(0,T.wb)(t);var e=I.Z.hasArc(t);this.set("hasArc",e),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=(0,T.zx)(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t=this.attr(),e=t.startArrow,r=t.endArrow;if(e){var n=this.getStartTangent();A.Yf(this,t,n[0][0],n[0][1],n[1][0],n[1][1])}if(r){n=this.getEndTangent();A.YR(this,t,n[0][0],n[0][1],n[1][0],n[1][1])}},e.prototype.isInStrokeOrPath=function(t,e,r,n,i){var o=this.getSegments(),a=this.get("hasArc"),s=!1;if(r){var h=this.getTotalLength();s=I.Z.isPointInStroke(o,i,t,e,h)}if(!s&&n)if(a)s=(0,B.Z)(this,t,e);else{var p=this.attr("path"),u=I.Z.extractPolygons(p);s=Z(u.polygons,t,e)||Z(u.polylines,t,e)}return s},e.prototype.createPath=function(t){var e=this.attr(),r=this.get("paramsCache");(0,s.MC)(this,t,e,r)},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),r=this.get("endArrowShape");e&&e.draw(t),r&&r.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,S.UM)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var e,r,n=this.get("tCache");n||(this._calculateCurve(),this._setTcache(),n=this.get("tCache"));var i=this.get("curve");if(!n||0===n.length)return i?{x:i[0][1],y:i[0][2]}:null;(0,S.S6)(n,(function(n,i){t>=n[0]&&t<=n[1]&&(e=(t-n[0])/(n[1]-n[0]),r=i)}));var o=i[r];if((0,S.UM)(o)||(0,S.UM)(r))return null;var a=o.length,s=i[r+1];return w.Ll.pointAt(o[a-2],o[a-1],s[1],s[2],s[3],s[4],s[5],s[6],e)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",I.Z.pathToCurve(t))},e.prototype._setTcache=function(){var t,e,r,n,i=0,o=0,a=[],s=this.get("curve");s&&((0,S.S6)(s,(function(t,e){r=s[e+1],n=t.length,r&&(i+=w.Ll.length(t[n-2],t[n-1],r[1],r[2],r[3],r[4],r[5],r[6])||0)})),this.set("totalLength",i),0!==i?((0,S.S6)(s,(function(h,p){r=s[p+1],n=h.length,r&&((t=[])[0]=o/i,e=w.Ll.length(h[n-2],h[n-1],r[1],r[2],r[3],r[4],r[5],r[6]),o+=e||0,t[1]=o/i,a.push(t))})),this.set("tCache",a)):this.set("tCache",[]))},e.prototype.getStartTangent=function(){var t,e=this.getSegments();if(e.length>1){var r=e[0].currentPoint,n=e[1].currentPoint,i=e[1].startTangent;t=[],i?(t.push([r[0]-i[0],r[1]-i[1]]),t.push([r[0],r[1]])):(t.push([n[0],n[1]]),t.push([r[0],r[1]]))}return t},e.prototype.getEndTangent=function(){var t,e=this.getSegments(),r=e.length;if(r>1){var n=e[r-2].currentPoint,i=e[r-1].currentPoint,o=e[r-1].endTangent;t=[],o?(t.push([i[0]-o[0],i[1]-o[1]]),t.push([i[0],i[1]])):(t.push([n[0],n[1]]),t.push([i[0],i[1]]))}return t},e}(u),L=M,F=r(61556),Y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.isInStrokeOrPath=function(t,e,r,n,i){var o=this.attr().points,a=!1;return r&&(a=(0,F.Z)(o,i,t,e,!0)),!a&&n&&(a=(0,b.Z)(o,t,e)),a},e.prototype.createPath=function(t){var e=this.attr().points;if(!(e.length<2)){t.beginPath();for(var r=0;r<e.length;r++){var n=e[r];0===r?t.moveTo(n[0],n[1]):t.lineTo(n[0],n[1])}t.closePath()}},e}(u),O=Y,R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,i.pi)((0,i.pi)({},e),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(e,r,n){t.prototype.onAttrChange.call(this,e,r,n),this.setArrow(),-1!==["points"].indexOf(e)&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),e=this.attrs,r=e.points,n=e.startArrow,i=e.endArrow,o=r.length,a=r[0][0],s=r[0][1],h=r[o-1][0],p=r[o-1][1];n&&A.Yf(this,t,r[1][0],r[1][1],a,s),i&&A.YR(this,t,r[o-2][0],r[o-2][1],h,p)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,e,r,n,i){if(!r||!i)return!1;var o=this.attr().points;return(0,F.Z)(o,i,t,e,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var e=this.attr(),r=e.points,n=e.startArrow,i=e.endArrow,o=r.length;if(!(r.length<2)){var a,s=r[0][0],h=r[0][1],p=r[o-1][0],u=r[o-1][1];if(n&&n.d)s+=(a=A.jF(s,h,r[1][0],r[1][1],n.d)).dx,h+=a.dy;if(i&&i.d)p-=(a=A.jF(r[o-2][0],r[o-2][1],p,u,i.d)).dx,u-=a.dy;t.beginPath(),t.moveTo(s,h);for(var c=0;c<o-1;c++){var l=r[c];t.lineTo(l[0],l[1])}t.lineTo(p,u)}},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),r=this.get("endArrowShape");e&&e.draw(t),r&&r.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return(0,S.UM)(e)?(this.set("totalLength",w.aH.length(t)),this.get("totalLength")):e},e.prototype.getPoint=function(t){var e,r,n=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),(0,S.S6)(i,(function(n,i){t>=n[0]&&t<=n[1]&&(e=(t-n[0])/(n[1]-n[0]),r=i)})),w.x1.pointAt(n[r][0],n[r][1],n[r+1][0],n[r+1][1],e)},e.prototype._setTcache=function(){var t=this.attr().points;if(t&&0!==t.length){var e=this.getTotalLength();if(!(e<=0)){var r,n,i=0,o=[];(0,S.S6)(t,(function(a,s){t[s+1]&&((r=[])[0]=i/e,n=w.x1.length(a[0],a[1],t[s+1][0],t[s+1][1]),i+=n,r[1]=i/e,o.push(r))})),this.set("tCache",o)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},e.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,r=[];return r.push([t[e-1][0],t[e-1][1]]),r.push([t[e][0],t[e][1]]),r},e}(u),E=R,X=r(96754),V=r(93138),H=r(62841),W=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,i.pi)((0,i.pi)({},e),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,e,r,n,i){var o=this.attr(),s=o.x,h=o.y,p=o.width,u=o.height,c=o.radius;if(c){var l=!1;return r&&(l=(0,H.Z)(s,h,p,u,c,i,t,e)),!l&&n&&(l=(0,B.Z)(this,t,e)),l}var f=i/2;return n&&r?(0,a.mh)(s-f,h-f,p+f,u+f,t,e):n?(0,a.mh)(s,h,p,u,t,e):r?(0,V.Z)(s,h,p,u,i,t,e):void 0},e.prototype.createPath=function(t){var e=this.attr(),r=e.x,n=e.y,i=e.width,o=e.height,a=e.radius;if(t.beginPath(),0===a)t.rect(r,n,i,o);else{var s=(0,X.Fy)(a),h=s[0],p=s[1],u=s[2],c=s[3];t.moveTo(r+h,n),t.lineTo(r+i-p,n),0!==p&&t.arc(r+i-p,n+p,p,-Math.PI/2,0),t.lineTo(r+i,n+o-u),0!==u&&t.arc(r+i-u,n+o-u,u,0,Math.PI/2),t.lineTo(r+c,n+o),0!==c&&t.arc(r+c,n+o-c,c,Math.PI/2,Math.PI),t.lineTo(r,n+h),0!==h&&t.arc(r+h,n+h,h,Math.PI,1.5*Math.PI),t.closePath()}},e}(u),K=W,N=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,i.pi)((0,i.pi)({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=(0,o.assembleFont)(t)},e.prototype._setText=function(t){var e=null;(0,a.HD)(t)&&-1!==t.indexOf("\n")&&(e=t.split("\n")),this.set("textArr",e)},e.prototype.onAttrChange=function(e,r,n){t.prototype.onAttrChange.call(this,e,r,n),e.startsWith("font")&&this._assembleFont(),"text"===e&&this._setText(r)},e.prototype._getSpaceingY=function(){var t=this.attrs,e=t.lineHeight,r=1*t.fontSize;return e?e-r:.14*r},e.prototype._drawTextArr=function(t,e,r){var n,i=this.attrs,s=i.textBaseline,h=i.x,p=i.y,u=1*i.fontSize,c=this._getSpaceingY(),l=(0,o.getTextHeight)(i.text,i.fontSize,i.lineHeight);(0,a.S6)(e,(function(e,i){n=p+i*(c+u)-l+u,"middle"===s&&(n+=l-u-(l-u)/2),"top"===s&&(n+=l-u),(0,a.kK)(e)||(r?t.fillText(e,h,n):t.strokeText(e,h,n))}))},e.prototype._drawText=function(t,e){var r=this.attr(),n=r.x,i=r.y,o=this.get("textArr");if(o)this._drawTextArr(t,o,e);else{var s=r.text;(0,a.kK)(s)||(e?t.fillText(s,n,i):t.strokeText(s,n,i))}},e.prototype.strokeAndFill=function(t){var e=this.attrs,r=e.lineWidth,n=e.opacity,i=e.strokeOpacity,o=e.fillOpacity;this.isStroke()&&r>0&&((0,a.kK)(i)||1===i||(t.globalAlpha=n),this.stroke(t)),this.isFill()&&((0,a.kK)(o)||1===o?this.fill(t):(t.globalAlpha=o,this.fill(t),t.globalAlpha=n)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(u),z=N}}]);
//# sourceMappingURL=5736.64e9f349.js.map