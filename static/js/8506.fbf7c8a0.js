"use strict";(self.webpackChunkjx3dps_online=self.webpackChunkjx3dps_online||[]).push([[8506],{40403:function(t,n,e){var i=e(29388),o=e(36403),r=e(54818),s=e(4699),a=e(7852),c=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.buttonGroup=null,n.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},n}return(0,i.ZT)(n,t),n.prototype.getButtonCfg=function(){return(0,r.b$)(this.buttonCfg,this.cfg)},n.prototype.drawButton=function(){var t=this.getButtonCfg(),n=this.context.view.foregroundGroup.addGroup({name:t.name}),e=n.addShape({type:"text",name:"button-text",attrs:(0,i.pi)({text:t.text},t.textStyle)}).getBBox(),o=(0,s.d)(t.padding),r=n.addShape({type:"rect",name:"button-rect",attrs:(0,i.pi)({x:e.x-o[3],y:e.y-o[0],width:e.width+o[1]+o[3],height:e.height+o[0]+o[2]},t.style)});r.toBack(),n.on("mouseenter",(function(){r.attr(t.activeStyle)})),n.on("mouseleave",(function(){r.attr(t.style)})),this.buttonGroup=n},n.prototype.resetPosition=function(){var t=this.context.view.getCoordinate().convert({x:1,y:1}),n=this.buttonGroup,e=n.getBBox(),i=o.vs(null,[["t",t.x-e.width-10,t.y+e.height+5]]);n.setMatrix(i)},n.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},n.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},n.prototype.destroy=function(){var n=this.buttonGroup;n&&n.remove(),t.prototype.destroy.call(this)},n}(a.Z);n.Z=c},71935:function(t,n,e){var i=e(29388),o=e(7852),r=e(68245),s=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.starting=!1,n.dragStart=!1,n}return(0,i.ZT)(n,t),n.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},n.prototype.drag=function(){if(this.startPoint){var t=this.context.getCurrentPoint(),n=this.context.view,e=this.context.event;this.dragStart?n.emit("drag",{target:e.target,x:e.x,y:e.y}):(0,r.TE)(t,this.startPoint)>4&&(n.emit("dragstart",{target:e.target,x:e.x,y:e.y}),this.dragStart=!0)}},n.prototype.end=function(){if(this.dragStart){var t=this.context.view,n=this.context.event;t.emit("dragend",{target:n.target,x:n.x,y:n.y})}this.starting=!1,this.dragStart=!1},n}(o.Z);n.Z=s},72554:function(t,n,e){var i=e(29388),o=e(54818),r=e(52019);var s=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(n,t),n.prototype.scroll=function(t){var n=this.context,e=n.view,i=n.event;if(e.getOptions().scrollbar){var r=(null===t||void 0===t?void 0:t.wheelDelta)||1,s=e.getController("scrollbar"),a=e.getXScale(),c=e.getOptions().data,u=(0,o.dp)((0,o.I)(c,a.field)),h=(0,o.dp)(a.values),l=s.getValue(),p=Math.floor((u-h)*l)+(function(t){return t.gEvent.originalEvent.deltaY>0}(i)?r:-r),f=r/(u-h)/1e4,v=(0,o.uZ)(p/(u-h)+f,0,1);s.setValue(v)}},n}(r.aU);n.Z=s},66974:function(t,n,e){var i=e(29388),o=e(36403),r=e(52019),s=e(68245),a=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.starting=!1,n.isMoving=!1,n.startPoint=null,n.startMatrix=null,n}return(0,i.ZT)(n,t),n.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},n.prototype.move=function(){if(this.starting){var t=this.startPoint,n=this.context.getCurrentPoint();if((0,s.TE)(t,n)>5&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var e=this.context.view,i=o.vs(this.startMatrix,[["t",n.x-t.x,n.y-t.y]]);e.backgroundGroup.setMatrix(i),e.foregroundGroup.setMatrix(i),e.middleGroup.setMatrix(i)}}},n.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},n.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var t=this.context.view;t.backgroundGroup.resetMatrix(),t.foregroundGroup.resetMatrix(),t.middleGroup.resetMatrix(),this.isMoving=!1},n}(r.aU);n.Z=a},70123:function(t,n,e){var i=e(29388),o=e(52019),r=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.dims=["x","y"],n.cfgFields=["dims"],n.cacheScaleDefs={},n}return(0,i.ZT)(n,t),n.prototype.hasDim=function(t){return this.dims.includes(t)},n.prototype.getScale=function(t){var n=this.context.view;return"x"===t?n.getXScale():n.getYScales()[0]},n.prototype.resetDim=function(t){var n=this.context.view;if(this.hasDim(t)&&this.cacheScaleDefs[t]){var e=this.getScale(t);n.scale(e.field,this.cacheScaleDefs[t]),this.cacheScaleDefs[t]=null}},n.prototype.reset=function(){this.resetDim("x"),this.resetDim("y"),this.context.view.render(!0)},n}(o.aU);n.Z=r},40780:function(t,n,e){var i=e(29388),o=e(54818),r=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.startPoint=null,n.starting=!1,n.startCache={},n}return(0,i.ZT)(n,t),n.prototype.start=function(){var t=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0;var n=this.dims;(0,o.S6)(n,(function(n){var e=t.getScale(n),i=e.min,o=e.max,r=e.values;t.startCache[n]={min:i,max:o,values:r}}))},n.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},n.prototype.translate=function(){var t=this;if(this.starting){var n=this.startPoint,e=this.context.view.getCoordinate(),i=this.context.getCurrentPoint(),r=e.invert(n),s=e.invert(i),a=s.x-r.x,c=s.y-r.y,u=this.context.view,h=this.dims;(0,o.S6)(h,(function(n){t.translateDim(n,{x:-1*a,y:-1*c})})),u.render(!0)}},n.prototype.translateDim=function(t,n){if(this.hasDim(t)){var e=this.getScale(t);e.isLinear&&this.translateLinear(t,e,n)}},n.prototype.translateLinear=function(t,n,e){var i=this.context.view,o=this.startCache[t],r=o.min,s=o.max,a=s-r,c=e[t]*a;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:n.nice,min:r,max:s}),i.scale(n.field,{nice:!1,min:r+c,max:s+c})},n.prototype.reset=function(){t.prototype.reset.call(this),this.startPoint=null,this.starting=!1},n}(e(70123).Z);n.Z=r},10112:function(t,n,e){var i=e(29388),o=e(54818),r=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.zoomRatio=.05,n}return(0,i.ZT)(n,t),n.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},n.prototype.zoom=function(t){var n=this,e=this.dims;(0,o.S6)(e,(function(e){n.zoomDim(e,t)})),this.context.view.render(!0)},n.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},n.prototype.zoomDim=function(t,n){if(this.hasDim(t)){var e=this.getScale(t);e.isLinear&&this.zoomLinear(t,e,n)}},n.prototype.zoomLinear=function(t,n,e){var i=this.context.view;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:n.nice,min:n.min,max:n.max});var o=this.cacheScaleDefs[t],r=o.max-o.min,s=n.min,a=n.max,c=e*r,u=s-c,h=a+c,l=(h-u)/r;h>u&&l<100&&l>.01&&i.scale(n.field,{nice:!1,min:s-c,max:a+c})},n}(e(70123).Z);n.Z=r},26394:function(t,n,e){e.d(n,{gi:function(){return S},zl:function(){return m.zl},w_:function(){return w}});var i=e(54818),o=e(29388),r=e(94704),s=e(68245),a=function(){function t(t){this.actions=[],this.event=null,this.cacheMap={},this.view=t}return t.prototype.cache=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(1===t.length)return this.cacheMap[t[0]];2===t.length&&(this.cacheMap[t[0]]=t[1])},t.prototype.getAction=function(t){return this.actions.find((function(n){return n.name===t}))},t.prototype.addAction=function(t){this.actions.push(t)},t.prototype.removeAction=function(t){var n=this.actions,e=this.actions.indexOf(t);e>=0&&n.splice(e,1)},t.prototype.getCurrentPoint=function(){var t=this.event;return t?t.target instanceof HTMLElement?this.view.getCanvas().getPointByClient(t.clientX,t.clientY):{x:t.x,y:t.y}:null},t.prototype.getCurrentShape=function(){return(0,i.U2)(this.event,["gEvent","shape"])},t.prototype.isInPlot=function(){var t=this.getCurrentPoint();return!!t&&this.view.isPointInPlot(t)},t.prototype.isInShape=function(t){var n=this.getCurrentShape();return!!n&&n.get("name")===t},t.prototype.isInComponent=function(t){var n=(0,s.OQ)(this.view),e=this.getCurrentPoint();return!!e&&!!n.find((function(n){var i=n.getBBox();return t?n.get("name")===t&&(0,s.A2)(i,e):(0,s.A2)(i,e)}))},t.prototype.destroy=function(){(0,i.S6)(this.actions.slice(),(function(t){t.destroy()})),this.view=null,this.event=null,this.actions=null,this.cacheMap=null},t}(),c=a,u=function(){function t(t,n){this.view=t,this.cfg=n}return t.prototype.init=function(){this.initEvents()},t.prototype.initEvents=function(){},t.prototype.clearEvents=function(){},t.prototype.destroy=function(){this.clearEvents()},t}();function h(t,n,e){var i=t.split(":"),o=i[0],s=n.getAction(o)||(0,r.PH)(o,n);if(!s)throw new Error("There is no action named ".concat(o));return{action:s,methodName:i[1],arg:e}}function l(t){var n=t.action,e=t.methodName,i=t.arg;if(!n[e])throw new Error("Action(".concat(n.name,") doesn't have a method called ").concat(e));n[e](i)}var p="start",f="showEnable",v="end",g="rollback",d="processing",y=function(t){function n(n,e){var i=t.call(this,n,e)||this;return i.callbackCaches={},i.emitCaches={},i.steps=e,i}return(0,o.ZT)(n,t),n.prototype.init=function(){this.initContext(),t.prototype.init.call(this)},n.prototype.destroy=function(){t.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},n.prototype.initEvents=function(){var t=this;(0,i.S6)(this.steps,(function(n,e){(0,i.S6)(n,(function(n){var i=t.getActionCallback(e,n);i&&t.bindEvent(n.trigger,i)}))}))},n.prototype.clearEvents=function(){var t=this;(0,i.S6)(this.steps,(function(n,e){(0,i.S6)(n,(function(n){var i=t.getActionCallback(e,n);i&&t.offEvent(n.trigger,i)}))}))},n.prototype.initContext=function(){var t=this.view,n=new c(t);this.context=n;var e=this.steps;(0,i.S6)(e,(function(t){(0,i.S6)(t,(function(t){if((0,i.mf)(t.action))t.actionObject={action:(0,r.pu)(t.action,n),methodName:"execute"};else if((0,i.HD)(t.action))t.actionObject=h(t.action,n,t.arg);else if((0,i.kJ)(t.action)){var e=t.action,o=(0,i.kJ)(t.arg)?t.arg:[t.arg];t.actionObject=[],(0,i.S6)(e,(function(e,i){t.actionObject.push(h(e,n,o[i]))}))}}))}))},n.prototype.isAllowStep=function(t){var n=this.currentStepName,e=this.steps;if(n===t)return!0;if(t===f)return!0;if(t===d)return n===p;if(t===p)return n!==d;if(t===v)return n===d||n===p;if(t===g){if(e[v])return n===v;if(n===p)return!0}return!1},n.prototype.isAllowExecute=function(t,n){if(this.isAllowStep(t)){var e=this.getKey(t,n);return(!n.once||!this.emitCaches[e])&&(!n.isEnable||n.isEnable(this.context))}return!1},n.prototype.enterStep=function(t){this.currentStepName=t,this.emitCaches={}},n.prototype.afterExecute=function(t,n){t!==f&&this.currentStepName!==t&&this.enterStep(t);var e=this.getKey(t,n);this.emitCaches[e]=!0},n.prototype.getKey=function(t,n){return t+n.trigger+n.action},n.prototype.getActionCallback=function(t,n){var e=this,o=this.context,r=this.callbackCaches,s=n.actionObject;if(n.action&&s){var a=this.getKey(t,n);if(!r[a]){var c=function(r){o.event=r,e.isAllowExecute(t,n)?((0,i.kJ)(s)?(0,i.S6)(s,(function(t){o.event=r,l(t)})):(o.event=r,l(s)),e.afterExecute(t,n),n.callback&&(o.event=r,n.callback(o))):o.event=null};n.debounce?r[a]=(0,i.Ds)(c,n.debounce.wait,n.debounce.immediate):n.throttle?r[a]=(0,i.P2)(c,n.throttle.wait,{leading:n.throttle.leading,trailing:n.throttle.trailing}):r[a]=c}return r[a]}return null},n.prototype.bindEvent=function(t,n){var e=t.split(":");"window"===e[0]?window.addEventListener(e[1],n):"document"===e[0]?document.addEventListener(e[1],n):this.view.on(t,n)},n.prototype.offEvent=function(t,n){var e=t.split(":");"window"===e[0]?window.removeEventListener(e[1],n):"document"===e[0]?document.removeEventListener(e[1],n):this.view.off(t,n)},n}(u),m=e(52019),x={};function w(t,n){x[(0,i.vl)(t)]=n}function S(t,n,e){var o=function(t){return x[(0,i.vl)(t)]}(t);if(!o)return null;if((0,i.PO)(o)){var r=(0,i.CD)((0,i.d9)(o),e);return new y(n,r)}return new o(n,e)}}}]);
//# sourceMappingURL=8506.fbf7c8a0.js.map