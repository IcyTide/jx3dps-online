"use strict";(self.webpackChunkjx3dps_online=self.webpackChunkjx3dps_online||[]).push([[824],{90824:function(e,t,n){var o=n(87462),d=n(4942),a=n(71002),r=n(1413),s=n(93433),l=n(15671),i=n(43144),c=n(97326),p=n(79340),u=n(98557),y=n(72791),v=n(11354),f=n(60632),g=n(54170),h=n(81694),K=n.n(h),N=n(2379),k=n(4359),E=n(80153),x=n(34529),D=n(69034),C=n(87613),S=n(86301),P=function(e){(0,p.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;(0,l.Z)(this,n);for(var o=arguments.length,d=new Array(o),a=0;a<o;a++)d[a]=arguments[a];return(e=t.call.apply(t,[this].concat(d))).destroyed=!1,e.delayedDragEnterLogic=void 0,e.loadingRetryTimes={},e.state={keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:(0,E.w$)()},e.dragStartMousePosition=null,e.dragNode=void 0,e.currentMouseOverDroppableNodeKey=null,e.listRef=y.createRef(),e.onNodeDragStart=function(t,n){var o=e.state,d=o.expandedKeys,a=o.keyEntities,r=e.props.onDragStart,s=n.props.eventKey;e.dragNode=n,e.dragStartMousePosition={x:t.clientX,y:t.clientY};var l=(0,k._5)(d,s);e.setState({draggingNodeKey:s,dragChildrenKeys:(0,k.wA)(s,a),indent:e.listRef.current.getIndentWidth()}),e.setExpandedKeys(l),window.addEventListener("dragend",e.onWindowDragEnd),null===r||void 0===r||r({event:t,node:(0,E.F)(n.props)})},e.onNodeDragEnter=function(t,n){var o=e.state,d=o.expandedKeys,a=o.keyEntities,r=o.dragChildrenKeys,l=o.flattenNodes,i=o.indent,p=e.props,u=p.onDragEnter,y=p.onExpand,v=p.allowDrop,f=p.direction,g=n.props,h=g.pos,K=g.eventKey,N=(0,c.Z)(e).dragNode;if(e.currentMouseOverDroppableNodeKey!==K&&(e.currentMouseOverDroppableNodeKey=K),N){var x=(0,k.OM)(t,N,n,i,e.dragStartMousePosition,v,l,a,d,f),D=x.dropPosition,C=x.dropLevelOffset,S=x.dropTargetKey,P=x.dropContainerKey,w=x.dropTargetPos,m=x.dropAllowed,b=x.dragOverNodeKey;-1===r.indexOf(S)&&m?(e.delayedDragEnterLogic||(e.delayedDragEnterLogic={}),Object.keys(e.delayedDragEnterLogic).forEach((function(t){clearTimeout(e.delayedDragEnterLogic[t])})),N.props.eventKey!==n.props.eventKey&&(t.persist(),e.delayedDragEnterLogic[h]=window.setTimeout((function(){if(null!==e.state.draggingNodeKey){var o=(0,s.Z)(d),r=a[n.props.eventKey];r&&(r.children||[]).length&&(o=(0,k.L0)(d,n.props.eventKey)),"expandedKeys"in e.props||e.setExpandedKeys(o),null===y||void 0===y||y(o,{node:(0,E.F)(n.props),expanded:!0,nativeEvent:t.nativeEvent})}}),800)),N.props.eventKey!==S||0!==C?(e.setState({dragOverNodeKey:b,dropPosition:D,dropLevelOffset:C,dropTargetKey:S,dropContainerKey:P,dropTargetPos:w,dropAllowed:m}),null===u||void 0===u||u({event:t,node:(0,E.F)(n.props),expandedKeys:d})):e.resetDragState()):e.resetDragState()}else e.resetDragState()},e.onNodeDragOver=function(t,n){var o=e.state,d=o.dragChildrenKeys,a=o.flattenNodes,r=o.keyEntities,s=o.expandedKeys,l=o.indent,i=e.props,p=i.onDragOver,u=i.allowDrop,y=i.direction,v=(0,c.Z)(e).dragNode;if(v){var f=(0,k.OM)(t,v,n,l,e.dragStartMousePosition,u,a,r,s,y),g=f.dropPosition,h=f.dropLevelOffset,K=f.dropTargetKey,N=f.dropContainerKey,x=f.dropAllowed,D=f.dropTargetPos,C=f.dragOverNodeKey;-1===d.indexOf(K)&&x&&(v.props.eventKey===K&&0===h?null===e.state.dropPosition&&null===e.state.dropLevelOffset&&null===e.state.dropTargetKey&&null===e.state.dropContainerKey&&null===e.state.dropTargetPos&&!1===e.state.dropAllowed&&null===e.state.dragOverNodeKey||e.resetDragState():g===e.state.dropPosition&&h===e.state.dropLevelOffset&&K===e.state.dropTargetKey&&N===e.state.dropContainerKey&&D===e.state.dropTargetPos&&x===e.state.dropAllowed&&C===e.state.dragOverNodeKey||e.setState({dropPosition:g,dropLevelOffset:h,dropTargetKey:K,dropContainerKey:N,dropTargetPos:D,dropAllowed:x,dragOverNodeKey:C}),null===p||void 0===p||p({event:t,node:(0,E.F)(n.props)}))}},e.onNodeDragLeave=function(t,n){e.currentMouseOverDroppableNodeKey!==n.props.eventKey||t.currentTarget.contains(t.relatedTarget)||(e.resetDragState(),e.currentMouseOverDroppableNodeKey=null);var o=e.props.onDragLeave;null===o||void 0===o||o({event:t,node:(0,E.F)(n.props)})},e.onWindowDragEnd=function(t){e.onNodeDragEnd(t,null,!0),window.removeEventListener("dragend",e.onWindowDragEnd)},e.onNodeDragEnd=function(t,n){var o=e.props.onDragEnd;e.setState({dragOverNodeKey:null}),e.cleanDragState(),null===o||void 0===o||o({event:t,node:(0,E.F)(n.props)}),e.dragNode=null,window.removeEventListener("dragend",e.onWindowDragEnd)},e.onNodeDrop=function(t,n){var o,d=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e.state,s=a.dragChildrenKeys,l=a.dropPosition,i=a.dropTargetKey,c=a.dropTargetPos,p=a.dropAllowed;if(p){var u=e.props.onDrop;if(e.setState({dragOverNodeKey:null}),e.cleanDragState(),null!==i){var y=(0,r.Z)((0,r.Z)({},(0,E.H8)(i,e.getTreeNodeRequiredProps())),{},{active:(null===(o=e.getActiveItem())||void 0===o?void 0:o.key)===i,data:e.state.keyEntities[i].node}),v=-1!==s.indexOf(i);(0,f.ZP)(!v,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var g=(0,k.yx)(c),h={event:t,node:(0,E.F)(y),dragNode:e.dragNode?(0,E.F)(e.dragNode.props):null,dragNodesKeys:[e.dragNode.props.eventKey].concat(s),dropToGap:0!==l,dropPosition:l+Number(g[g.length-1])};d||null===u||void 0===u||u(h),e.dragNode=null}}},e.cleanDragState=function(){null!==e.state.draggingNodeKey&&e.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),e.dragStartMousePosition=null,e.currentMouseOverDroppableNodeKey=null},e.triggerExpandActionExpand=function(t,n){var o=e.state,d=o.expandedKeys,a=o.flattenNodes,s=n.expanded,l=n.key;if(!(n.isLeaf||t.shiftKey||t.metaKey||t.ctrlKey)){var i=a.filter((function(e){return e.key===l}))[0],c=(0,E.F)((0,r.Z)((0,r.Z)({},(0,E.H8)(l,e.getTreeNodeRequiredProps())),{},{data:i.data}));e.setExpandedKeys(s?(0,k._5)(d,l):(0,k.L0)(d,l)),e.onNodeExpand(t,c)}},e.onNodeClick=function(t,n){var o=e.props,d=o.onClick;"click"===o.expandAction&&e.triggerExpandActionExpand(t,n),null===d||void 0===d||d(t,n)},e.onNodeDoubleClick=function(t,n){var o=e.props,d=o.onDoubleClick;"doubleClick"===o.expandAction&&e.triggerExpandActionExpand(t,n),null===d||void 0===d||d(t,n)},e.onNodeSelect=function(t,n){var o=e.state.selectedKeys,d=e.state,a=d.keyEntities,r=d.fieldNames,s=e.props,l=s.onSelect,i=s.multiple,c=n.selected,p=n[r.key],u=!c,y=(o=u?i?(0,k.L0)(o,p):[p]:(0,k._5)(o,p)).map((function(e){var t=a[e];return t?t.node:null})).filter((function(e){return e}));e.setUncontrolledState({selectedKeys:o}),null===l||void 0===l||l(o,{event:"select",selected:u,node:n,selectedNodes:y,nativeEvent:t.nativeEvent})},e.onNodeCheck=function(t,n,o){var d,a=e.state,r=a.keyEntities,l=a.checkedKeys,i=a.halfCheckedKeys,c=e.props,p=c.checkStrictly,u=c.onCheck,y=n.key,v={event:"check",node:n,checked:o,nativeEvent:t.nativeEvent};if(p){var f=o?(0,k.L0)(l,y):(0,k._5)(l,y);d={checked:f,halfChecked:(0,k._5)(i,y)},v.checkedNodes=f.map((function(e){return r[e]})).filter((function(e){return e})).map((function(e){return e.node})),e.setUncontrolledState({checkedKeys:f})}else{var g=(0,C.S)([].concat((0,s.Z)(l),[y]),!0,r),h=g.checkedKeys,K=g.halfCheckedKeys;if(!o){var N=new Set(h);N.delete(y);var E=(0,C.S)(Array.from(N),{checked:!1,halfCheckedKeys:K},r);h=E.checkedKeys,K=E.halfCheckedKeys}d=h,v.checkedNodes=[],v.checkedNodesPositions=[],v.halfCheckedKeys=K,h.forEach((function(e){var t=r[e];if(t){var n=t.node,o=t.pos;v.checkedNodes.push(n),v.checkedNodesPositions.push({node:n,pos:o})}})),e.setUncontrolledState({checkedKeys:h},!1,{halfCheckedKeys:K})}null===u||void 0===u||u(d,v)},e.onNodeLoad=function(t){var n=t.key,o=new Promise((function(o,d){e.setState((function(a){var r=a.loadedKeys,s=void 0===r?[]:r,l=a.loadingKeys,i=void 0===l?[]:l,c=e.props,p=c.loadData,u=c.onLoad;return p&&-1===s.indexOf(n)&&-1===i.indexOf(n)?(p(t).then((function(){var d=e.state.loadedKeys,a=(0,k.L0)(d,n);null===u||void 0===u||u(a,{event:"load",node:t}),e.setUncontrolledState({loadedKeys:a}),e.setState((function(e){return{loadingKeys:(0,k._5)(e.loadingKeys,n)}})),o()})).catch((function(t){if(e.setState((function(e){return{loadingKeys:(0,k._5)(e.loadingKeys,n)}})),e.loadingRetryTimes[n]=(e.loadingRetryTimes[n]||0)+1,e.loadingRetryTimes[n]>=10){var a=e.state.loadedKeys;(0,f.ZP)(!1,"Retry for `loadData` many times but still failed. No more retry."),e.setUncontrolledState({loadedKeys:(0,k.L0)(a,n)}),o()}d(t)})),{loadingKeys:(0,k.L0)(i,n)}):null}))}));return o.catch((function(){})),o},e.onNodeMouseEnter=function(t,n){var o=e.props.onMouseEnter;null===o||void 0===o||o({event:t,node:n})},e.onNodeMouseLeave=function(t,n){var o=e.props.onMouseLeave;null===o||void 0===o||o({event:t,node:n})},e.onNodeContextMenu=function(t,n){var o=e.props.onRightClick;o&&(t.preventDefault(),o({event:t,node:n}))},e.onFocus=function(){var t=e.props.onFocus;e.setState({focused:!0});for(var n=arguments.length,o=new Array(n),d=0;d<n;d++)o[d]=arguments[d];null===t||void 0===t||t.apply(void 0,o)},e.onBlur=function(){var t=e.props.onBlur;e.setState({focused:!1}),e.onActiveChange(null);for(var n=arguments.length,o=new Array(n),d=0;d<n;d++)o[d]=arguments[d];null===t||void 0===t||t.apply(void 0,o)},e.getTreeNodeRequiredProps=function(){var t=e.state;return{expandedKeys:t.expandedKeys||[],selectedKeys:t.selectedKeys||[],loadedKeys:t.loadedKeys||[],loadingKeys:t.loadingKeys||[],checkedKeys:t.checkedKeys||[],halfCheckedKeys:t.halfCheckedKeys||[],dragOverNodeKey:t.dragOverNodeKey,dropPosition:t.dropPosition,keyEntities:t.keyEntities}},e.setExpandedKeys=function(t){var n=e.state,o=n.treeData,d=n.fieldNames,a=(0,E.oH)(o,t,d);e.setUncontrolledState({expandedKeys:t,flattenNodes:a},!0)},e.onNodeExpand=function(t,n){var o=e.state.expandedKeys,d=e.state,a=d.listChanging,r=d.fieldNames,s=e.props,l=s.onExpand,i=s.loadData,c=n.expanded,p=n[r.key];if(!a){var u=o.indexOf(p),y=!c;if((0,f.ZP)(c&&-1!==u||!c&&-1===u,"Expand state not sync with index check"),o=y?(0,k.L0)(o,p):(0,k._5)(o,p),e.setExpandedKeys(o),null===l||void 0===l||l(o,{node:n,expanded:y,nativeEvent:t.nativeEvent}),y&&i){var v=e.onNodeLoad(n);v&&v.then((function(){var t=(0,E.oH)(e.state.treeData,o,r);e.setUncontrolledState({flattenNodes:t})})).catch((function(){var t=e.state.expandedKeys,n=(0,k._5)(t,p);e.setExpandedKeys(n)}))}}},e.onListChangeStart=function(){e.setUncontrolledState({listChanging:!0})},e.onListChangeEnd=function(){setTimeout((function(){e.setUncontrolledState({listChanging:!1})}))},e.onActiveChange=function(t){var n=e.state.activeKey,o=e.props.onActiveChange;n!==t&&(e.setState({activeKey:t}),null!==t&&e.scrollTo({key:t}),null===o||void 0===o||o(t))},e.getActiveItem=function(){var t=e.state,n=t.activeKey,o=t.flattenNodes;return null===n?null:o.find((function(e){return e.key===n}))||null},e.offsetActiveKey=function(t){var n=e.state,o=n.flattenNodes,d=n.activeKey,a=o.findIndex((function(e){return e.key===d}));-1===a&&t<0&&(a=o.length);var r=o[a=(a+t+o.length)%o.length];if(r){var s=r.key;e.onActiveChange(s)}else e.onActiveChange(null)},e.onKeyDown=function(t){var n=e.state,o=n.activeKey,d=n.expandedKeys,a=n.checkedKeys,s=n.fieldNames,l=e.props,i=l.onKeyDown,c=l.checkable,p=l.selectable;switch(t.which){case v.Z.UP:e.offsetActiveKey(-1),t.preventDefault();break;case v.Z.DOWN:e.offsetActiveKey(1),t.preventDefault()}var u=e.getActiveItem();if(u&&u.data){var y=e.getTreeNodeRequiredProps(),f=!1===u.data.isLeaf||!!(u.data[s.children]||[]).length,g=(0,E.F)((0,r.Z)((0,r.Z)({},(0,E.H8)(o,y)),{},{data:u.data,active:!0}));switch(t.which){case v.Z.LEFT:f&&d.includes(o)?e.onNodeExpand({},g):u.parent&&e.onActiveChange(u.parent.key),t.preventDefault();break;case v.Z.RIGHT:f&&!d.includes(o)?e.onNodeExpand({},g):u.children&&u.children.length&&e.onActiveChange(u.children[0].key),t.preventDefault();break;case v.Z.ENTER:case v.Z.SPACE:!c||g.disabled||!1===g.checkable||g.disableCheckbox?c||!p||g.disabled||!1===g.selectable||e.onNodeSelect({},g):e.onNodeCheck({},g,!a.includes(o))}}null===i||void 0===i||i(t)},e.setUncontrolledState=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e.destroyed){var d=!1,a=!0,s={};Object.keys(t).forEach((function(n){n in e.props?a=!1:(d=!0,s[n]=t[n])})),!d||n&&!a||e.setState((0,r.Z)((0,r.Z)({},s),o))}},e.scrollTo=function(t){e.listRef.current.scrollTo(t)},e}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var e=this.props.activeKey;void 0!==e&&e!==this.state.activeKey&&(this.setState({activeKey:e}),null!==e&&this.scrollTo({key:e}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var e,t,n=this.state,r=n.focused,s=n.flattenNodes,l=n.keyEntities,i=n.draggingNodeKey,c=n.activeKey,p=n.dropLevelOffset,u=n.dropContainerKey,v=n.dropTargetKey,f=n.dropPosition,h=n.dragOverNodeKey,k=n.indent,E=this.props,D=E.prefixCls,C=E.className,S=E.style,P=E.showLine,w=E.focusable,m=E.tabIndex,b=void 0===m?0:m,L=E.selectable,T=E.showIcon,O=E.icon,A=E.switcherIcon,Z=E.draggable,M=E.checkable,R=E.checkStrictly,I=E.disabled,F=E.motion,U=E.loadData,_=E.filterTreeNode,H=E.height,W=E.itemHeight,j=E.virtual,B=E.titleRender,q=E.dropIndicatorRender,G=E.onContextMenu,$=E.onScroll,z=E.direction,X=E.rootClassName,Y=E.rootStyle,J=(0,g.Z)(this.props,{aria:!0,data:!0});return Z&&(t="object"===(0,a.Z)(Z)?Z:"function"===typeof Z?{nodeDraggable:Z}:{}),y.createElement(N.k.Provider,{value:{prefixCls:D,selectable:L,showIcon:T,icon:O,switcherIcon:A,draggable:t,draggingNodeKey:i,checkable:M,checkStrictly:R,disabled:I,keyEntities:l,dropLevelOffset:p,dropContainerKey:u,dropTargetKey:v,dropPosition:f,dragOverNodeKey:h,indent:k,direction:z,dropIndicatorRender:q,loadData:U,filterTreeNode:_,titleRender:B,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop}},y.createElement("div",{role:"tree",className:K()(D,C,X,(e={},(0,d.Z)(e,"".concat(D,"-show-line"),P),(0,d.Z)(e,"".concat(D,"-focused"),r),(0,d.Z)(e,"".concat(D,"-active-focused"),null!==c),e)),style:Y},y.createElement(x.ZP,(0,o.Z)({ref:this.listRef,prefixCls:D,style:S,data:s,disabled:I,selectable:L,checkable:!!M,motion:F,dragging:null!==i,height:H,itemHeight:W,virtual:j,focusable:w,focused:r,tabIndex:b,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:G,onScroll:$},this.getTreeNodeRequiredProps(),J))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n,o=t.prevProps,a={prevProps:e};function s(t){return!o&&t in e||o&&o[t]!==e[t]}var l=t.fieldNames;if(s("fieldNames")&&(l=(0,E.w$)(e.fieldNames),a.fieldNames=l),s("treeData")?n=e.treeData:s("children")&&((0,f.ZP)(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),n=(0,E.zn)(e.children)),n){a.treeData=n;var i=(0,E.I8)(n,{fieldNames:l});a.keyEntities=(0,r.Z)((0,d.Z)({},x.eo,x._1),i.keyEntities)}var c,p=a.keyEntities||t.keyEntities;if(s("expandedKeys")||o&&s("autoExpandParent"))a.expandedKeys=e.autoExpandParent||!o&&e.defaultExpandParent?(0,k.r7)(e.expandedKeys,p):e.expandedKeys;else if(!o&&e.defaultExpandAll){var u=(0,r.Z)({},p);delete u[x.eo],a.expandedKeys=Object.keys(u).map((function(e){return u[e].key}))}else!o&&e.defaultExpandedKeys&&(a.expandedKeys=e.autoExpandParent||e.defaultExpandParent?(0,k.r7)(e.defaultExpandedKeys,p):e.defaultExpandedKeys);if(a.expandedKeys||delete a.expandedKeys,n||a.expandedKeys){var y=(0,E.oH)(n||t.treeData,a.expandedKeys||t.expandedKeys,l);a.flattenNodes=y}if((e.selectable&&(s("selectedKeys")?a.selectedKeys=(0,k.BT)(e.selectedKeys,e):!o&&e.defaultSelectedKeys&&(a.selectedKeys=(0,k.BT)(e.defaultSelectedKeys,e))),e.checkable)&&(s("checkedKeys")?c=(0,k.E6)(e.checkedKeys)||{}:!o&&e.defaultCheckedKeys?c=(0,k.E6)(e.defaultCheckedKeys)||{}:n&&(c=(0,k.E6)(e.checkedKeys)||{checkedKeys:t.checkedKeys,halfCheckedKeys:t.halfCheckedKeys}),c)){var v=c,g=v.checkedKeys,h=void 0===g?[]:g,K=v.halfCheckedKeys,N=void 0===K?[]:K;if(!e.checkStrictly){var D=(0,C.S)(h,!0,p);h=D.checkedKeys,N=D.halfCheckedKeys}a.checkedKeys=h,a.halfCheckedKeys=N}return s("loadedKeys")&&(a.loadedKeys=e.loadedKeys),a}}]),n}(y.Component);P.defaultProps={prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:S.Z,allowDrop:function(){return!0},expandAction:!1},P.TreeNode=D.Z,t.Z=P}}]);
//# sourceMappingURL=824.6b97dc61.js.map